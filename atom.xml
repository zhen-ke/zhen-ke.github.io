<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>XMit</title>
  
  <subtitle>Frontend Engineer</subtitle>
  <link href="http://zhen-ke.github.io/atom.xml" rel="self"/>
  
  <link href="http://zhen-ke.github.io/"/>
  <updated>2025-08-02T00:29:31.618Z</updated>
  <id>http://zhen-ke.github.io/</id>
  
  <author>
    <name>XMit</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Armbian USB è‡ªåŠ¨æŒ‚è½½å¹¶å…±äº«æ•™ç¨‹</title>
    <link href="http://zhen-ke.github.io/2024/11/15/armbian-usb-automount-share/"/>
    <id>http://zhen-ke.github.io/2024/11/15/armbian-usb-automount-share/</id>
    <published>2024-11-15T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.618Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•åœ¨ Armbian ç³»ç»Ÿä¸Šå®ç° USB è®¾å¤‡çš„è‡ªåŠ¨æŒ‚è½½å’Œ Samba å…±äº«åŠŸèƒ½ã€‚é€šè¿‡è¿™ä¸ªè„šæœ¬ï¼Œä½ å¯ä»¥å®ç°æ’å…¥ USB è®¾å¤‡åè‡ªåŠ¨æŒ‚è½½å¹¶åˆ›å»ºç½‘ç»œå…±äº«ï¼Œæ”¯æŒ Windows ç½‘ç»œå‘ç°åŠŸèƒ½ã€‚</p><h2 id="åŠŸèƒ½ç‰¹ç‚¹"><a href="#åŠŸèƒ½ç‰¹ç‚¹" class="headerlink" title="åŠŸèƒ½ç‰¹ç‚¹"></a>åŠŸèƒ½ç‰¹ç‚¹</h2><ul><li>è‡ªåŠ¨æ£€æµ‹å¹¶æŒ‚è½½ USB å­˜å‚¨è®¾å¤‡</li><li>æ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿï¼šNTFSã€FAT32ã€exFATã€ext4</li><li>è‡ªåŠ¨é…ç½® Samba å…±äº«</li><li>æ”¯æŒ Windows ç½‘ç»œå‘ç°ï¼ˆé€šè¿‡ wsdd2ï¼‰</li><li>å³æ’å³ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ</li><li>æ”¯æŒåŒ¿åè®¿é—®å’Œå®Œå…¨è¯»å†™æƒé™</li><li>è‡ªåŠ¨æ—¥å¿—è®°å½•</li><li>æ™ºèƒ½ä¾èµ–æ£€æŸ¥å’Œå®‰è£…</li></ul><span id="more"></span><h2 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h2><h3 id="1-æ›´æ¢é•œåƒæºï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰"><a href="#1-æ›´æ¢é•œåƒæºï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰" class="headerlink" title="1. æ›´æ¢é•œåƒæºï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰"></a>1. æ›´æ¢é•œåƒæºï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰</h3><p>ç¼–è¾‘ sources.list æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>é€‰æ‹©é€‚åˆä½ ç³»ç»Ÿçš„é•œåƒæºï¼š</p><details><summary>ğŸ“¦ Ubuntu ç³»ç»Ÿï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…åå¤§å­¦ Ubuntu é•œåƒæº</span></span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble main restricted universe multiverse</span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure></details><details><summary>ğŸ“¦ Debian ç³»ç»Ÿï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…åå¤§å­¦ Debian é•œåƒæº</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br></pre></td></tr></table></figure></details><blockquote><p>ğŸ’¡ æç¤ºï¼šé€‰æ‹©å¯¹åº”ä½ ç³»ç»Ÿçš„é•œåƒæºå¤åˆ¶å³å¯ï¼Œä¸ç¡®å®šæ˜¯å“ªä¸ªç³»ç»Ÿå¯ä»¥é€šè¿‡ <code>lsb_release -a</code> å‘½ä»¤æŸ¥çœ‹</p></blockquote><h3 id="2-å®‰è£…å¿…è¦è½¯ä»¶åŒ…"><a href="#2-å®‰è£…å¿…è¦è½¯ä»¶åŒ…" class="headerlink" title="2. å®‰è£…å¿…è¦è½¯ä»¶åŒ…"></a>2. å®‰è£…å¿…è¦è½¯ä»¶åŒ…</h3><p>è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…ä»¥ä¸‹å¿…è¦ç»„ä»¶ï¼š</p><ul><li>sambaï¼šç½‘ç»œå…±äº«æœåŠ¡</li><li>samba-common-binï¼šSamba é€šç”¨ç»„ä»¶</li><li>ntfs-3gï¼šNTFS æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ</li><li>exfat-fuse å’Œ exfatprogsï¼šexFAT æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ</li><li>jqï¼šJSON å¤„ç†å·¥å…·</li><li>wsdd2ï¼šWindows ç½‘ç»œå‘ç°æ”¯æŒ</li></ul><h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><h3 id="1-åˆ›å»ºè„šæœ¬æ–‡ä»¶"><a href="#1-åˆ›å»ºè„šæœ¬æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºè„šæœ¬æ–‡ä»¶"></a>1. åˆ›å»ºè„šæœ¬æ–‡ä»¶</h3><p>åˆ›å»ºå¹¶ç¼–è¾‘è„šæœ¬æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano usb-automount-share.sh</span><br></pre></td></tr></table></figure><details><summary>ğŸ“¦ è„šæœ¬å†…å®¹ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line"></span><br><span class="line">MOUNT_BASE=<span class="string">&quot;/mnt/usb&quot;</span></span><br><span class="line">SMB_CONF=<span class="string">&quot;/etc/samba/smb.conf&quot;</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/var/log/usb_share.log&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿åŸºç¡€æŒ‚è½½ç›®å½•å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$MOUNT_BASE</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ‰€æœ‰ USB å­˜å‚¨è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_usb_devices</span></span>() &#123;</span><br><span class="line">lsblk -Jplno NAME,TYPE,RM,UUID | jq -r <span class="string">&#x27;.blockdevices[]</span></span><br><span class="line"><span class="string">| select(.type == &quot;part&quot; and .rm == true and .uuid != null)</span></span><br><span class="line"><span class="string">| .name + &quot; &quot; + .uuid&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® Samba å…±äº«</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup_samba_share</span></span>() &#123;</span><br><span class="line"><span class="built_in">local</span> mount_point=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="built_in">local</span> share_name=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–ä¸ºç©ºï¼Œå…ˆåˆ›å»ºåŸºæœ¬é…ç½®</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -f <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> ] || [ ! -s <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line">        <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span>)</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ›å»ºåŸºæœ¬é…ç½®</span></span><br><span class="line">        <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[global]</span></span><br><span class="line"><span class="string">workgroup = WORKGROUP</span></span><br><span class="line"><span class="string">netbios name = USB-SHARE</span></span><br><span class="line"><span class="string">wins support = yes</span></span><br><span class="line"><span class="string">local master = yes</span></span><br><span class="line"><span class="string">preferred master = yes</span></span><br><span class="line"><span class="string">server string = USB Share Server</span></span><br><span class="line"><span class="string">dns proxy = no</span></span><br><span class="line"><span class="string">log file = /var/log/samba/log.%m</span></span><br><span class="line"><span class="string">max log size = 1000</span></span><br><span class="line"><span class="string">server role = standalone server</span></span><br><span class="line"><span class="string">map to guest = Bad User</span></span><br><span class="line"><span class="string">usershare allow guests = yes</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¡®ä¿æ—¥å¿—ç›®å½•å­˜åœ¨</span></span><br><span class="line">        <span class="built_in">mkdir</span> -p /var/log/samba</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¾ç½®é€‚å½“çš„æƒé™</span></span><br><span class="line">        <span class="built_in">chmod</span> 644 <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ£€æŸ¥å¹¶æ·»åŠ å…¨å±€é…ç½®</span></span><br><span class="line">    <span class="keyword">if</span> ! grep -q <span class="string">&quot;wins support = yes&quot;</span> <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># å¤‡ä»½åŸé…ç½®</span></span><br><span class="line">        <span class="built_in">cp</span> <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;SMB_CONF&#125;</span>.bak&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ·»åŠ å…¨å±€é…ç½®åˆ°æ–‡ä»¶å¼€å¤´</span></span><br><span class="line">        <span class="built_in">cat</span> &gt; <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[global]</span></span><br><span class="line"><span class="string">workgroup = WORKGROUP</span></span><br><span class="line"><span class="string">netbios name = USB-SHARE</span></span><br><span class="line"><span class="string">wins support = yes</span></span><br><span class="line"><span class="string">local master = yes</span></span><br><span class="line"><span class="string">preferred master = yes</span></span><br><span class="line"><span class="string">server string = USB Share Server</span></span><br><span class="line"><span class="string">dns proxy = no</span></span><br><span class="line"><span class="string">log file = /var/log/samba/log.%m</span></span><br><span class="line"><span class="string">max log size = 1000</span></span><br><span class="line"><span class="string">server role = standalone server</span></span><br><span class="line"><span class="string">map to guest = Bad User</span></span><br><span class="line"><span class="string">usershare allow guests = yes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span> <span class="comment"># è¿½åŠ åŸé…ç½®æ–‡ä»¶çš„å…¶ä½™éƒ¨åˆ†ï¼ˆæ’é™¤åŸæœ‰çš„ [global] éƒ¨åˆ†ï¼‰</span></span><br><span class="line">sed <span class="string">&#x27;/\[global\]/,/\[/!d;/\[global\]/d;/\[/!d&#x27;</span> <span class="string">&quot;<span class="variable">$&#123;SMB_CONF&#125;</span>.bak&quot;</span> &gt;&gt; <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ£€æŸ¥å…±äº«æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> ! grep -q <span class="string">&quot;^\[<span class="variable">$share_name</span>\]&quot;</span> <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># æ·»åŠ å…±äº«é…ç½®</span></span><br><span class="line">        <span class="built_in">cat</span> &gt;&gt; <span class="string">&quot;<span class="variable">$SMB_CONF</span>&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[$share_name]</span></span><br><span class="line"><span class="string">path = $mount_point</span></span><br><span class="line"><span class="string">browseable = yes</span></span><br><span class="line"><span class="string">read only = no</span></span><br><span class="line"><span class="string">guest ok = yes</span></span><br><span class="line"><span class="string">create mask = 0777</span></span><br><span class="line"><span class="string">directory mask = 0777</span></span><br><span class="line"><span class="string">force user = nobody</span></span><br><span class="line"><span class="string">force group = nogroup</span></span><br><span class="line"><span class="string">comment = USB Share - $share_name</span></span><br><span class="line"><span class="string">EOF</span> <span class="comment"># é‡å¯ Samba æœåŠ¡</span></span><br><span class="line">systemctl restart smbd nmbd</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½è®¾å¤‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">mount_device</span></span>() &#123;</span><br><span class="line"><span class="built_in">local</span> device=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="built_in">local</span> uuid=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    <span class="built_in">local</span> mount_point=<span class="string">&quot;<span class="variable">$MOUNT_BASE</span>/<span class="subst">$(basename <span class="string">&quot;<span class="variable">$device</span>&quot;</span>)</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºæŒ‚è½½ç‚¹</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ£€æŸ¥æ˜¯å¦å·²ç»æŒ‚è½½</span></span><br><span class="line">    <span class="keyword">if</span> ! mountpoint -q <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># å°è¯•æŒ‚è½½</span></span><br><span class="line">        mount -U <span class="string">&quot;<span class="variable">$uuid</span>&quot;</span> <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span> -o rw,<span class="built_in">users</span>,<span class="built_in">umask</span>=000</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;æˆåŠŸæŒ‚è½½è®¾å¤‡ <span class="variable">$device</span> åˆ° <span class="variable">$mount_point</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">            <span class="comment"># è®¾ç½®Sambaå…±äº«</span></span><br><span class="line">            setup_samba_share <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;æŒ‚è½½è®¾å¤‡ <span class="variable">$device</span> å¤±è´¥&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">            <span class="built_in">rmdir</span> <span class="string">&quot;<span class="variable">$mount_point</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_dependencies</span></span>() &#123;</span><br><span class="line"><span class="built_in">local</span> dependencies=(<span class="string">&quot;samba&quot;</span> <span class="string">&quot;samba-common-bin&quot;</span> <span class="string">&quot;ntfs-3g&quot;</span> <span class="string">&quot;exfat-fuse&quot;</span> <span class="string">&quot;exfatprogs&quot;</span> <span class="string">&quot;jq&quot;</span> <span class="string">&quot;wsdd2&quot;</span>)</span><br><span class="line"><span class="built_in">local</span> packages_to_install=()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> package <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;dependencies[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨ dpkg-query æ£€æŸ¥åŒ…æ˜¯å¦å·²å®‰è£…</span></span><br><span class="line">        <span class="keyword">if</span> ! dpkg-query -W -f=<span class="string">&#x27;$&#123;Status&#125;&#x27;</span> <span class="string">&quot;<span class="variable">$package</span>&quot;</span> 2&gt;/dev/null | grep -q <span class="string">&quot;ok installed&quot;</span>; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;éœ€è¦å®‰è£…: <span class="variable">$package</span>&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">            packages_to_install+=(<span class="string">&quot;<span class="variable">$package</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åªæœ‰å½“æœ‰åŒ…éœ€è¦å®‰è£…æ—¶æ‰æ‰§è¡Œå®‰è£…</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;#packages_to_install[@]&#125;</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;å¼€å§‹å®‰è£…ç¼ºå¤±çš„åŒ…...&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">        <span class="comment"># å…ˆå°è¯•ç›´æ¥å®‰è£…</span></span><br><span class="line">        <span class="keyword">if</span> ! apt-get install -y <span class="string">&quot;<span class="variable">$&#123;packages_to_install[@]&#125;</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">            <span class="comment"># å¦‚æœå®‰è£…å¤±è´¥ï¼Œåˆ™æ›´æ–°æºåé‡è¯•</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;ç›´æ¥å®‰è£…å¤±è´¥ï¼Œæ›´æ–°è½¯ä»¶æºåé‡è¯•...&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">            apt-get update &amp;&amp; apt-get install -y <span class="string">&quot;<span class="variable">$&#123;packages_to_install[@]&#125;</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…&quot;</span> | <span class="built_in">tee</span> -a <span class="string">&quot;<span class="variable">$LOG_FILE</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿ nmbd æœåŠ¡å·²å®‰è£…å¹¶å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ensure_nmbd_service</span></span>() &#123;</span><br><span class="line">systemctl <span class="built_in">enable</span> nmbd</span><br><span class="line">systemctl start nmbd</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ–°å‡½æ•°æ¥ç¡®ä¿ wsdd2 æœåŠ¡æ­£å¸¸è¿è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ensure_wsdd2_service</span></span>() &#123;</span><br><span class="line">systemctl <span class="built_in">enable</span> wsdd2</span><br><span class="line">systemctl start wsdd2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">main</span></span>() &#123; <span class="comment"># æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–</span></span><br><span class="line">install_dependencies</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç¡®ä¿ nmbd æœåŠ¡å·²å®‰è£…å¹¶å¯åŠ¨</span></span><br><span class="line">    ensure_nmbd_service</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç¡®ä¿ wsdd2 æœåŠ¡å·²å¯åŠ¨</span></span><br><span class="line">    ensure_wsdd2_service</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¤„ç†æ‰€æœ‰USBå­˜å‚¨è®¾å¤‡</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">read</span> -r device uuid; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$uuid</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            mount_device <span class="string">&quot;<span class="variable">$device</span>&quot;</span> <span class="string">&quot;<span class="variable">$uuid</span>&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span> &lt; &lt;(get_usb_devices)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œä¸»å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">main</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><h3 id="2-è®¾ç½®è„šæœ¬æƒé™å¹¶å®‰è£…"><a href="#2-è®¾ç½®è„šæœ¬æƒé™å¹¶å®‰è£…" class="headerlink" title="2. è®¾ç½®è„šæœ¬æƒé™å¹¶å®‰è£…"></a>2. è®¾ç½®è„šæœ¬æƒé™å¹¶å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x usb-automount-share.sh</span><br><span class="line"><span class="built_in">cp</span> usb-automount-share.sh /usr/local/bin/</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®å¼€æœºè‡ªå¯"><a href="#3-é…ç½®å¼€æœºè‡ªå¯" class="headerlink" title="3. é…ç½®å¼€æœºè‡ªå¯"></a>3. é…ç½®å¼€æœºè‡ªå¯</h3><p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥é€‰æ‹©ï¼š</p><h4 id="æ–¹å¼ä¸€ï¼šä½¿ç”¨-rc-localï¼ˆæ¨èï¼‰"><a href="#æ–¹å¼ä¸€ï¼šä½¿ç”¨-rc-localï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹å¼ä¸€ï¼šä½¿ç”¨ rc.localï¼ˆæ¨èï¼‰"></a>æ–¹å¼ä¸€ï¼šä½¿ç”¨ rc.localï¼ˆæ¨èï¼‰</h4><ol><li>ç¼–è¾‘ rc.local æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/rc.local</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>exit 0</code> å‰æ·»åŠ ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/usb-automount-share.sh</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¡®ä¿ rc.local å¯æ‰§è¡Œï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x /etc/rc.local</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒï¼šä½¿ç”¨-systemd-service"><a href="#æ–¹å¼äºŒï¼šä½¿ç”¨-systemd-service" class="headerlink" title="æ–¹å¼äºŒï¼šä½¿ç”¨ systemd service"></a>æ–¹å¼äºŒï¼šä½¿ç”¨ systemd service</h4><ol><li>åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/system/usb-automount.service</span><br></pre></td></tr></table></figure><ol start="2"><li>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=USB Automount Service</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/usb-automount-share.sh</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><ol start="3"><li>å¯ç”¨æœåŠ¡ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> usb-automount</span><br><span class="line">sudo systemctl start usb-automount</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><h3 id="1-æ’å…¥-USB-è®¾å¤‡"><a href="#1-æ’å…¥-USB-è®¾å¤‡" class="headerlink" title="1. æ’å…¥ USB è®¾å¤‡"></a>1. æ’å…¥ USB è®¾å¤‡</h3><p>è®¾å¤‡æ’å…¥åä¼šè‡ªåŠ¨ï¼š</p><ul><li>æ£€æµ‹ USB è®¾å¤‡</li><li>åˆ›å»ºæŒ‚è½½ç‚¹</li><li>æŒ‚è½½è®¾å¤‡</li><li>é…ç½®ç½‘ç»œå…±äº«</li></ul><h3 id="2-è®¿é—®å…±äº«"><a href="#2-è®¿é—®å…±äº«" class="headerlink" title="2. è®¿é—®å…±äº«"></a>2. è®¿é—®å…±äº«</h3><ul><li>Windowsï¼š<ul><li>æ–¹å¼ 1ï¼šç½‘ç»œé‚»å±…ä¸­æ‰¾åˆ° â€œUSB-SHAREâ€</li><li>æ–¹å¼ 2ï¼š<code>\\USB-SHARE</code> æˆ– <code>\\IPåœ°å€</code></li></ul></li><li>Macï¼š<code>smb://USB-SHARE</code> æˆ– <code>smb://IPåœ°å€</code></li><li>Linuxï¼š<code>smb://USB-SHARE</code> æˆ– <code>smb://IPåœ°å€</code></li></ul><h3 id="3-æŸ¥çœ‹çŠ¶æ€"><a href="#3-æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="3. æŸ¥çœ‹çŠ¶æ€"></a>3. æŸ¥çœ‹çŠ¶æ€</h3><ul><li>æ£€æŸ¥æŒ‚è½½ï¼š<code>df -h</code> æˆ– <code>lsblk</code></li><li>æŸ¥çœ‹æ—¥å¿—ï¼š<code>tail -f /var/log/usb_share.log</code></li><li>æ£€æŸ¥æœåŠ¡ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status smbd</span><br><span class="line">systemctl status nmbd</span><br><span class="line">systemctl status wsdd2</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="1-ç½‘ç»œå‘ç°é—®é¢˜"><a href="#1-ç½‘ç»œå‘ç°é—®é¢˜" class="headerlink" title="1. ç½‘ç»œå‘ç°é—®é¢˜"></a>1. ç½‘ç»œå‘ç°é—®é¢˜</h3><p>æ£€æŸ¥ wsdd2 æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status wsdd2</span><br></pre></td></tr></table></figure><h3 id="2-å…±äº«è®¿é—®é—®é¢˜"><a href="#2-å…±äº«è®¿é—®é—®é¢˜" class="headerlink" title="2. å…±äº«è®¿é—®é—®é¢˜"></a>2. å…±äº«è®¿é—®é—®é¢˜</h3><p>æ£€æŸ¥ Samba é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testparm</span><br></pre></td></tr></table></figure><h3 id="3-æŒ‚è½½é—®é¢˜"><a href="#3-æŒ‚è½½é—®é¢˜" class="headerlink" title="3. æŒ‚è½½é—®é¢˜"></a>3. æŒ‚è½½é—®é¢˜</h3><p>æŸ¥çœ‹è®¾å¤‡ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -f</span><br></pre></td></tr></table></figure><h3 id="4-æƒé™é—®é¢˜"><a href="#4-æƒé™é—®é¢˜" class="headerlink" title="4. æƒé™é—®é¢˜"></a>4. æƒé™é—®é¢˜</h3><p>æ£€æŸ¥æŒ‚è½½æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /mnt/usb/</span><br></pre></td></tr></table></figure><h2 id="æ—¥å¿—è¯´æ˜"><a href="#æ—¥å¿—è¯´æ˜" class="headerlink" title="æ—¥å¿—è¯´æ˜"></a>æ—¥å¿—è¯´æ˜</h2><p>è„šæœ¬ä¼šè®°å½•ä»¥ä¸‹ä¿¡æ¯åˆ° <code>/var/log/usb_share.log</code>ï¼š</p><ul><li>è®¾å¤‡æŒ‚è½½çŠ¶æ€</li><li>ä¾èµ–å®‰è£…æƒ…å†µ</li><li>é”™è¯¯ä¿¡æ¯</li><li>æœåŠ¡å¯åŠ¨çŠ¶æ€</li></ul><h2 id="å®‰å…¨å»ºè®®"><a href="#å®‰å…¨å»ºè®®" class="headerlink" title="å®‰å…¨å»ºè®®"></a>å®‰å…¨å»ºè®®</h2><ol><li><p>é»˜è®¤é…ç½®</p><ul><li>å…è®¸åŒ¿åè®¿é—®</li><li>å®Œå…¨è¯»å†™æƒé™</li><li>é€‚åˆå®¶åº­ç½‘ç»œä½¿ç”¨</li></ul></li><li><p>å¢å¼ºå®‰å…¨æ€§</p><ul><li>ä¿®æ”¹ Samba é…ç½®æ·»åŠ ç”¨æˆ·è®¤è¯</li><li>é™åˆ¶å…±äº«æƒé™</li><li>é…ç½®é˜²ç«å¢™è§„åˆ™</li></ul></li></ol><h2 id="æŠ€æœ¯æ”¯æŒ"><a href="#æŠ€æœ¯æ”¯æŒ" class="headerlink" title="æŠ€æœ¯æ”¯æŒ"></a>æŠ€æœ¯æ”¯æŒ</h2><p>å¦‚é‡é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š</p><ol><li>ç³»ç»Ÿæ—¥å¿—ï¼š<code>journalctl -xe</code></li><li>Samba æ—¥å¿—ï¼š<code>tail -f /var/log/samba/log.smbd</code></li><li>USB æ—¥å¿—ï¼š<code>tail -f /var/log/usb_share.log</code></li><li>ç¡®ä¿æ‰€éœ€æœåŠ¡æ­£å¸¸è¿è¡Œ</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a class="link"   href="https://www.samba.org/samba/docs/" >Samba å®˜æ–¹æ–‡æ¡£<i class="fas fa-external-link-alt"></i></a></li><li><a class="link"   href="https://github.com/christgau/wsdd2" >wsdd2 é¡¹ç›®<i class="fas fa-external-link-alt"></i></a></li><li><a class="link"   href="https://docs.armbian.com/" >Armbian å®˜æ–¹æ–‡æ¡£<i class="fas fa-external-link-alt"></i></a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•åœ¨ Armbian ç³»ç»Ÿä¸Šå®ç° USB è®¾å¤‡çš„è‡ªåŠ¨æŒ‚è½½å’Œ Samba å…±äº«åŠŸèƒ½ã€‚é€šè¿‡è¿™ä¸ªè„šæœ¬ï¼Œä½ å¯ä»¥å®ç°æ’å…¥ USB è®¾å¤‡åè‡ªåŠ¨æŒ‚è½½å¹¶åˆ›å»ºç½‘ç»œå…±äº«ï¼Œæ”¯æŒ Windows ç½‘ç»œå‘ç°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŠŸèƒ½ç‰¹ç‚¹&quot;&gt;&lt;a href=&quot;#åŠŸèƒ½ç‰¹ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;åŠŸèƒ½ç‰¹ç‚¹&quot;&gt;&lt;/a&gt;åŠŸèƒ½ç‰¹ç‚¹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨æ£€æµ‹å¹¶æŒ‚è½½ USB å­˜å‚¨è®¾å¤‡&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿï¼šNTFSã€FAT32ã€exFATã€ext4&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨é…ç½® Samba å…±äº«&lt;/li&gt;
&lt;li&gt;æ”¯æŒ Windows ç½‘ç»œå‘ç°ï¼ˆé€šè¿‡ wsdd2ï¼‰&lt;/li&gt;
&lt;li&gt;å³æ’å³ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ”¯æŒåŒ¿åè®¿é—®å’Œå®Œå…¨è¯»å†™æƒé™&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æ—¥å¿—è®°å½•&lt;/li&gt;
&lt;li&gt;æ™ºèƒ½ä¾èµ–æ£€æŸ¥å’Œå®‰è£…&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="armbian usb automount share" scheme="http://zhen-ke.github.io/categories/armbian-usb-automount-share/"/>
    
    
    <category term="NAS" scheme="http://zhen-ke.github.io/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>macOS å‰ç«¯å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—</title>
    <link href="http://zhen-ke.github.io/2024/10/29/macos-dev-env-config/"/>
    <id>http://zhen-ke.github.io/2024/10/29/macos-dev-env-config/</id>
    <published>2024-10-29T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç³»ç»Ÿå‡†å¤‡"><a href="#ç³»ç»Ÿå‡†å¤‡" class="headerlink" title="ç³»ç»Ÿå‡†å¤‡"></a>ç³»ç»Ÿå‡†å¤‡</h2><p>é¦–å…ˆç¡®ä¿ä½ çš„ macOS ç³»ç»Ÿå·²å®‰è£…äº† Xcode Command Line Toolsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="å®‰è£…-Homebrew"><a href="#å®‰è£…-Homebrew" class="headerlink" title="å®‰è£… Homebrew"></a>å®‰è£… Homebrew</h2><ol><li><p>å®‰è£… Homebrewï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–° Homebrewï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®-Zsh"><a href="#é…ç½®-Zsh" class="headerlink" title="é…ç½® Zsh"></a>é…ç½® Zsh</h2><h3 id="1-æ£€æŸ¥å½“å‰-Shell"><a href="#1-æ£€æŸ¥å½“å‰-Shell" class="headerlink" title="1. æ£€æŸ¥å½“å‰ Shell"></a>1. æ£€æŸ¥å½“å‰ Shell</h3><p>é¦–å…ˆæ£€æŸ¥ä½ å½“å‰ä½¿ç”¨çš„ Shellï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br></pre></td></tr></table></figure><h3 id="2-å®‰è£…-Zsh"><a href="#2-å®‰è£…-Zsh" class="headerlink" title="2. å®‰è£… Zsh"></a>2. å®‰è£… Zsh</h3><p>macOS ä» Catalina (10.15) å¼€å§‹é»˜è®¤ä½¿ç”¨ Zshã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¾ƒæ—©ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ Homebrew å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install zsh</span><br></pre></td></tr></table></figure><h3 id="3-è®¾ç½®-Zsh-ä¸ºé»˜è®¤-Shell"><a href="#3-è®¾ç½®-Zsh-ä¸ºé»˜è®¤-Shell" class="headerlink" title="3. è®¾ç½® Zsh ä¸ºé»˜è®¤ Shell"></a>3. è®¾ç½® Zsh ä¸ºé»˜è®¤ Shell</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°† Zsh æ·»åŠ åˆ°å¯ç”¨çš„ Shell åˆ—è¡¨ä¸­</span></span><br><span class="line">sudo sh -c <span class="string">&#x27;echo $(which zsh) &gt;&gt; /etc/shells&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† Zsh è®¾ç½®ä¸ºé»˜è®¤ Shell</span></span><br><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br></pre></td></tr></table></figure><h3 id="4-é‡å¯ç»ˆç«¯"><a href="#4-é‡å¯ç»ˆç«¯" class="headerlink" title="4. é‡å¯ç»ˆç«¯"></a>4. é‡å¯ç»ˆç«¯</h3><p>è®¾ç½®å®Œæˆåï¼Œå…³é—­å¹¶é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œæˆ–è€…è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> zsh</span><br></pre></td></tr></table></figure><h3 id="5-éªŒè¯-Zsh"><a href="#5-éªŒè¯-Zsh" class="headerlink" title="5. éªŒè¯ Zsh"></a>5. éªŒè¯ Zsh</h3><p>ç¡®è®¤æ˜¯å¦æˆåŠŸåˆ‡æ¢åˆ° Zshï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br><span class="line"><span class="comment"># åº”è¯¥æ˜¾ç¤º: /bin/zsh æˆ– /usr/local/bin/zsh</span></span><br></pre></td></tr></table></figure><h3 id="6-å®‰è£…-Oh-My-Zsh"><a href="#6-å®‰è£…-Oh-My-Zsh" class="headerlink" title="6. å®‰è£… Oh My Zsh"></a>6. å®‰è£… Oh My Zsh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="7-å®‰è£…æ’ä»¶"><a href="#7-å®‰è£…æ’ä»¶" class="headerlink" title="7. å®‰è£…æ’ä»¶"></a>7. å®‰è£…æ’ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… fast-syntax-highlighting</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zdharma-continuum/fast-syntax-highlighting <span class="variable">$&#123;ZSH_CUSTOM:-<span class="variable">$HOME</span>/.oh-my-zsh/custom&#125;</span>/plugins/fast-syntax-highlighting</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… zsh-autosuggestions</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… zsh-completions</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-completions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-completions</span><br></pre></td></tr></table></figure><h3 id="8-åˆ›å»ºå¹¶é…ç½®-zshrc-æ–‡ä»¶ï¼š"><a href="#8-åˆ›å»ºå¹¶é…ç½®-zshrc-æ–‡ä»¶ï¼š" class="headerlink" title="8. åˆ›å»ºå¹¶é…ç½® .zshrc æ–‡ä»¶ï¼š"></a>8. åˆ›å»ºå¹¶é…ç½® .zshrc æ–‡ä»¶ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤‡ä»½ç°æœ‰é…ç½®</span></span><br><span class="line"><span class="built_in">cp</span> ~/.zshrc ~/.zshrc.backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">vi ~/.zshrc</span><br></pre></td></tr></table></figure><h3 id="9-å°†ä»¥ä¸‹é…ç½®å¤åˆ¶åˆ°-zshrcï¼š"><a href="#9-å°†ä»¥ä¸‹é…ç½®å¤åˆ¶åˆ°-zshrcï¼š" class="headerlink" title="9. å°†ä»¥ä¸‹é…ç½®å¤åˆ¶åˆ° .zshrcï¼š"></a>9. å°†ä»¥ä¸‹é…ç½®å¤åˆ¶åˆ° .zshrcï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Path configuration</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HOME</span>/bin:<span class="variable">$HOME</span>/.local/bin:/usr/local/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line">PROMPT=<span class="string">&#x27;%n@%m %1~ %# &#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NVM configuration</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Oh My Zsh configuration</span></span><br><span class="line"><span class="built_in">export</span> ZSH=<span class="string">&quot;<span class="variable">$HOME</span>/.oh-my-zsh&quot;</span></span><br><span class="line">ZSH_THEME=<span class="string">&quot;robbyrussell&quot;</span>  <span class="comment"># ä½ å¯ä»¥é€‰æ‹©å…¶ä»–ä¸»é¢˜</span></span><br><span class="line">DISABLE_UPDATE_PROMPT=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Performance options</span></span><br><span class="line">DISABLE_AUTO_UPDATE=<span class="string">&quot;true&quot;</span></span><br><span class="line">DISABLE_MAGIC_FUNCTIONS=<span class="string">&quot;true&quot;</span></span><br><span class="line">COMPLETION_WAITING_DOTS=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># History configuration</span></span><br><span class="line">HISTSIZE=50000</span><br><span class="line">SAVEHIST=50000</span><br><span class="line">HISTFILE=~/.zsh_history</span><br><span class="line"><span class="built_in">setopt</span> HIST_IGNORE_ALL_DUPS</span><br><span class="line"><span class="built_in">setopt</span> HIST_SAVE_NO_DUPS</span><br><span class="line"><span class="built_in">setopt</span> HIST_REDUCE_BLANKS</span><br><span class="line"><span class="built_in">setopt</span> HIST_VERIFY</span><br><span class="line"><span class="built_in">setopt</span> SHARE_HISTORY</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plugin configuration</span></span><br><span class="line">plugins=(</span><br><span class="line">    git</span><br><span class="line">    node</span><br><span class="line">    npm</span><br><span class="line">    vscode</span><br><span class="line">    colored-man-pages</span><br><span class="line">    brew</span><br><span class="line">    macos</span><br><span class="line">    fast-syntax-highlighting</span><br><span class="line">    zsh-autosuggestions</span><br><span class="line">    zsh-completions</span><br><span class="line">    docker</span><br><span class="line">    docker-compose</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load Oh My Zsh</span></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load completions</span></span><br><span class="line"><span class="built_in">autoload</span> -Uz compinit &amp;&amp; compinit -i</span><br><span class="line"><span class="built_in">zstyle</span> <span class="string">&#x27;:completion:*&#x27;</span> menu <span class="keyword">select</span></span><br><span class="line"><span class="built_in">zstyle</span> <span class="string">&#x27;:completion:*&#x27;</span> matcher-list <span class="string">&#x27;m:&#123;a-zA-Z&#125;=&#123;A-Za-z&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Useful aliases</span></span><br><span class="line"><span class="built_in">alias</span> zshconfig=<span class="string">&quot;code ~/.zshrc&quot;</span></span><br><span class="line"><span class="built_in">alias</span> update=<span class="string">&#x27;brew update &amp;&amp; brew upgrade &amp;&amp; brew cleanup&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls -G&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -lah&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> c=<span class="string">&#x27;clear&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ..=<span class="string">&#x27;cd ..&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ...=<span class="string">&#x27;cd ../..&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gst=<span class="string">&#x27;git status&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gco=<span class="string">&#x27;git checkout&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gcm=<span class="string">&#x27;git commit -m&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gaa=<span class="string">&#x27;git add .&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gl=<span class="string">&#x27;git log --graph --oneline&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Environment variables</span></span><br><span class="line"><span class="built_in">export</span> EDITOR=<span class="string">&#x27;code&#x27;</span></span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h2><ol><li><p>é€šè¿‡ Homebrew å®‰è£… Gitï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure></li><li><p>é…ç½® Gitï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;ä½ çš„åå­—&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;ä½ çš„é‚®ç®±&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®é»˜è®¤åˆ†æ”¯å</span></span><br><span class="line">git config --global init.defaultBranch main</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® Git ä½¿ç”¨ VS Code ä½œä¸ºé»˜è®¤ç¼–è¾‘å™¨</span></span><br><span class="line">git config --global core.editor <span class="string">&quot;code --wait&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="å®‰è£…-Node-ç‰ˆæœ¬ç®¡ç†å™¨"><a href="#å®‰è£…-Node-ç‰ˆæœ¬ç®¡ç†å™¨" class="headerlink" title="å®‰è£… Node ç‰ˆæœ¬ç®¡ç†å™¨"></a>å®‰è£… Node ç‰ˆæœ¬ç®¡ç†å™¨</h2><ol><li><p>å®‰è£… nvmï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ .zshrc ä¸­æ·»åŠ  NVM é…ç½®ï¼ˆåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NVM configuration</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºå¸¸ç”¨çš„ node å‘½ä»¤æ·»åŠ åˆ«å</span></span><br><span class="line"><span class="built_in">alias</span> nr=<span class="string">&#x27;npm run&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> nrd=<span class="string">&#x27;npm run dev&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> nrs=<span class="string">&#x27;npm run start&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> nrb=<span class="string">&#x27;npm run build&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> nrt=<span class="string">&#x27;npm run test&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…æœ€æ–°çš„ LTS ç‰ˆæœ¬çš„ Node.jsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nvm install --lts</span><br><span class="line">nvm use --lts</span><br><span class="line">nvm <span class="built_in">alias</span> default <span class="string">&#x27;lts/*&#x27;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="å®‰è£…å¼€å‘å·¥å…·"><a href="#å®‰è£…å¼€å‘å·¥å…·" class="headerlink" title="å®‰è£…å¼€å‘å·¥å…·"></a>å®‰è£…å¼€å‘å·¥å…·</h2><ol><li><p>å®‰è£…å¸¸ç”¨å¼€å‘å·¥å…·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… VS Code</span></span><br><span class="line">brew install --cask visual-studio-code</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… Chrome</span></span><br><span class="line">brew install --cask google-chrome</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… Docker</span></span><br><span class="line">brew install --cask docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å…¶ä»–å®ç”¨å·¥å…·</span></span><br><span class="line">brew install tree  <span class="comment"># ç›®å½•æ ‘æŸ¥çœ‹</span></span><br><span class="line">brew install wget  <span class="comment"># ä¸‹è½½å·¥å…·</span></span><br><span class="line">brew install tldr  <span class="comment"># å‘½ä»¤å¸®åŠ©</span></span><br><span class="line">brew install jq    <span class="comment"># JSON å¤„ç†å·¥å…·</span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å¸¸ç”¨çš„å…¨å±€ npm åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pnpm</span><br><span class="line">npm install -g yarn</span><br><span class="line">npm install -g typescript</span><br><span class="line">npm install -g @vue/cli</span><br><span class="line">npm install -g serve</span><br><span class="line">npm install -g http-server</span><br></pre></td></tr></table></figure></li></ol><h2 id="å¯é€‰é…ç½®"><a href="#å¯é€‰é…ç½®" class="headerlink" title="å¯é€‰é…ç½®"></a>å¯é€‰é…ç½®</h2><ol><li><p>å®‰è£…å’Œé…ç½® SSH keyï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;ä½ çš„é‚®ç®±&quot;</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(ssh-agent -s)</span>&quot;</span></span><br><span class="line">ssh-add ~/.ssh/id_ed25519</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å­—ä½“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… Fira Code</span></span><br><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line">brew install --cask font-fira-code</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å…¶ä»–å®ç”¨å·¥å…·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># iTerm2 ç»ˆç«¯</span></span><br><span class="line">brew install --cask iterm2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ç”¨å·¥å…·</span></span><br><span class="line">brew install --cask rectangle  <span class="comment"># çª—å£ç®¡ç†</span></span><br><span class="line">brew install --cask alfred    <span class="comment"># æ•ˆç‡å·¥å…·</span></span><br><span class="line">brew install --cask postman  <span class="comment"># API æµ‹è¯•å·¥å…·</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="éªŒè¯å®‰è£…"><a href="#éªŒè¯å®‰è£…" class="headerlink" title="éªŒè¯å®‰è£…"></a>éªŒè¯å®‰è£…</h2><p>å®Œæˆå®‰è£…åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ Git ç‰ˆæœ¬</span></span><br><span class="line">git --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ Node ç‰ˆæœ¬</span></span><br><span class="line">node --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ npm ç‰ˆæœ¬</span></span><br><span class="line">npm --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ Homebrew ç‰ˆæœ¬</span></span><br><span class="line">brew --version</span><br></pre></td></tr></table></figure><h2 id="æ—¥å¸¸ç»´æŠ¤"><a href="#æ—¥å¸¸ç»´æŠ¤" class="headerlink" title="æ—¥å¸¸ç»´æŠ¤"></a>æ—¥å¸¸ç»´æŠ¤</h2><p>å®šæœŸè¿è¡Œä»¥ä¸‹å‘½ä»¤ä¿æŒç³»ç»Ÿæ›´æ–°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–° Homebrew</span></span><br><span class="line">brew update &amp;&amp; brew upgrade &amp;&amp; brew cleanup</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–° npm åŒ…</span></span><br><span class="line">npm update -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–° Oh My Zsh</span></span><br><span class="line">omz update</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°æƒé™é—®é¢˜ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ sudo</li><li>æŸäº›ç³»ç»Ÿå¯èƒ½éœ€è¦é‡å¯ç”µè„‘æ‰èƒ½å®Œå…¨ç”Ÿæ•ˆ</li><li>å¦‚æœæƒ³è¦æ¢å¤åˆ° bashï¼Œå¯ä»¥ä½¿ç”¨ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/bash</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><p>å¦‚æœé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li><p><strong>æç¤º zsh ä¸åœ¨ &#x2F;etc&#x2F;shells ä¸­</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c <span class="string">&#x27;echo $(which zsh) &gt;&gt; /etc/shells&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æƒé™é—®é¢˜</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®ä¿ Zsh ç›®å½•æƒé™æ­£ç¡®</span></span><br><span class="line">sudo <span class="built_in">chown</span> -R $(<span class="built_in">whoami</span>) ~/.oh-my-zsh</span><br></pre></td></tr></table></figure></li><li><p><strong>æ’ä»¶å®‰è£…å¤±è´¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®ä¿ custom/plugins ç›®å½•å­˜åœ¨</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç³»ç»Ÿå‡†å¤‡&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿå‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿå‡†å¤‡&quot;&gt;&lt;/a&gt;ç³»ç»Ÿå‡†å¤‡&lt;/h2&gt;&lt;p&gt;é¦–å…ˆç¡®ä¿ä½ çš„ macOS ç³»ç»Ÿå·²å®‰è£…äº† Xcode Command Line Toolsï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;xcode-select --install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="macOS" scheme="http://zhen-ke.github.io/tags/macOS/"/>
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="http://zhen-ke.github.io/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="å‰ç«¯å¼€å‘" scheme="http://zhen-ke.github.io/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡çŸ¿å¡ç¿»è½¦</title>
    <link href="http://zhen-ke.github.io/2024/01/05/record-a-mine-truck-rollover/"/>
    <id>http://zhen-ke.github.io/2024/01/05/record-a-mine-truck-rollover/</id>
    <published>2024-01-05T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¨³å®šæ€§æµ‹è¯•"><a href="#ç¨³å®šæ€§æµ‹è¯•" class="headerlink" title="ç¨³å®šæ€§æµ‹è¯•"></a>ç¨³å®šæ€§æµ‹è¯•</h2><p>çŸ¿å¡å‹å·ï¼šRX5700XL</p><span id="more"></span><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/05.15zc9dszsyf4.jpg"                        alt="1"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/04.5briw6qg7lc0.jpg"                        alt="2"                 ></p><h2 id="æ‹†æœº"><a href="#æ‹†æœº" class="headerlink" title="æ‹†æœº"></a>æ‹†æœº</h2><p>ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå‘ç°æ¸©åº¦æœ‰ç‚¹é«˜å°±æ‹†å¼€æ¸…ç°æ¢ç¡…è„‚ï¼Œæ‹†å¼€å‘ç°å¡æ•´ä½“æƒ…å†µæ¯”è¾ƒå·®</p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/01.7iafcly1hhs0.jpg"                        alt="3"                 ></p><h2 id="ç¿»è½¦"><a href="#ç¿»è½¦" class="headerlink" title="ç¿»è½¦"></a>ç¿»è½¦</h2><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5781.212aaauzvg2o.PNG"                        alt="4"                 ></p><p>åº—å®¶æ²¡æœ‰è¿½ç©¶æˆ‘ç§æ‹†å¡å¯¼è‡´ä¿ä¿®å¤±æ•ˆï¼ŒæˆåŠŸç»™æ¢äº†ä¸€å¼ å¡ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä½¿ç”¨è‰¯å¥½ï¼Œæ¢å¡åï¼Œå¤–è§‚çœ‹èµ·æ¥æ¯”è¾ƒæ–°ï¼Œæ•´ä½“æ»¡æ„ã€‚</p><h2 id="æ„å¤–å‘ç°"><a href="#æ„å¤–å‘ç°" class="headerlink" title="æ„å¤–å‘ç°"></a>æ„å¤–å‘ç°</h2><p>æ¢å¡æ­£å¸¸ä½¿ç”¨æ²¡å•¥é—®é¢˜ï¼Œä½†ç©æ¸¸æˆæ—¶é—®é¢˜æ¯”è¾ƒå¤šï¼Œä½“ç°åœ¨åˆšè¿›å®ˆæœ›å…ˆé”‹çš„å‰å‡ åˆ†é’Ÿé‡Œï¼Œæ‰å¸§æ¯”è¾ƒä¸¥é‡ï¼Œå°è¯•é‡ç½®æ¸¸æˆè®¾ç½®ã€é™ä½æ¸¸æˆç”»è´¨ã€é‡è£…ç³»ç»Ÿã€é‡è£…é©±åŠ¨ç­‰éƒ½æ— æ³•è§£å†³ï¼Œåç»­æœç´¢æ˜¾å¡ Bios æ—¶æ„å¤–å‘ç°è¿™å¡å±…ç„¶æœ‰ä¸ªå¼€å…³èƒ½åˆ‡æ¢æ˜¾å¡çš„ Biosã€‚</p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/image.3biawnxc3co0.jpg"                        alt="5"                 ></p><p>åˆ‡æ¢æ€§èƒ½æ¨¡å¼åæ‰å¸§çš„é—®é¢˜åŸºæœ¬å°±è§£å†³äº†ï¼Œä» GPUZ é‡Œçœ‹é¢‘ç‡å’ŒåŠŸè€—å˜é«˜äº†ç‚¹ã€‚</p><p>æœ€ä¸»è¦æ˜¯ GPUZ å·²ç»è¯†åˆ«æˆ RX5700XT äº†</p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/image.4xtr37omw340.jpg"                        alt="6"                 ></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç¨³å®šæ€§æµ‹è¯•&quot;&gt;&lt;a href=&quot;#ç¨³å®šæ€§æµ‹è¯•&quot; class=&quot;headerlink&quot; title=&quot;ç¨³å®šæ€§æµ‹è¯•&quot;&gt;&lt;/a&gt;ç¨³å®šæ€§æµ‹è¯•&lt;/h2&gt;&lt;p&gt;çŸ¿å¡å‹å·ï¼šRX5700XL&lt;/p&gt;</summary>
    
    
    
    <category term="æ˜¾å¡" scheme="http://zhen-ke.github.io/categories/%E6%98%BE%E5%8D%A1/"/>
    
    
    <category term="çŸ¿å¡" scheme="http://zhen-ke.github.io/tags/%E7%9F%BF%E5%8D%A1/"/>
    
  </entry>
  
  <entry>
    <title>Some changes made in life in 2023</title>
    <link href="http://zhen-ke.github.io/2023/12/03/some-changes-made-in-life-in-2023/"/>
    <id>http://zhen-ke.github.io/2023/12/03/some-changes-made-in-life-in-2023/</id>
    <published>2023-12-03T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ç†¬å¤œï¼Œæ™šä¸Š 10 ç‚¹å·¦å³ç¡è§‰ï¼Œä¸€èˆ¬æ—©ä¸Š 6 ç‚¹å·¦å³å°±é†’</p><span id="more"></span><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5655.4nz32at7ds00.jpg"                        alt="01"                 ></p><p>åšæŒé™åï¼Œä»å¹´åˆåªèƒ½å 10 å‡ åˆ†é’Ÿåˆ°ç°åœ¨èƒ½å 30~40 åˆ†é’Ÿå·¦å³<br><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5656.1vnpy6v85g4g.jpg"                        alt="02"                 ></p><p>æˆ’ yÃ­nï¼Œä»å¹´åˆåˆ°ç°åœ¨å·®ä¸å¤š 300 å¤šå¤©ï¼Œå”¯ä¸€çš„é—®é¢˜æ˜¯æ™šä¸Šä¼šæ¢¦é—ï¼Œå¯¼è‡´ç¬¬äºŒå¤©è¦æ¢åºŠå•</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸ç†¬å¤œï¼Œæ™šä¸Š 10 ç‚¹å·¦å³ç¡è§‰ï¼Œä¸€èˆ¬æ—©ä¸Š 6 ç‚¹å·¦å³å°±é†’&lt;/p&gt;</summary>
    
    
    
    <category term="ç”Ÿæ´»" scheme="http://zhen-ke.github.io/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="æ”¹å˜" scheme="http://zhen-ke.github.io/tags/%E6%94%B9%E5%8F%98/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨äº†å››å¹´çš„ iPhone11</title>
    <link href="http://zhen-ke.github.io/2023/11/25/iPhone11/"/>
    <id>http://zhen-ke.github.io/2023/11/25/iPhone11/</id>
    <published>2023-11-25T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5620.1u8tc5cdm28w.jpg"                        alt="iPhone11-1"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5617.54af827614s0.jpg"                        alt="iPhone11-2"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5618.6k8cj8culxc.jpg"                        alt="iPhone11-3"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5619.29wboge2sk4k.jpg"                        alt="iPhone11-4"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/i4Tools_09C61ZfKUR.webmg5z56n4.jpg"                        alt="iPhone11-5"                 ></p><p><img                         lazyload                       alt="image"                       data-src="https://img.xmit.eu.org/gh/zhen-ke/img@main/IMG_5616.258n1qe8db9c.jpg"                        alt="iPhone11-6"                 ></p>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;

&lt;p&gt;&lt;img  
                       lazyload
                       alt=&quot;image&quot;
                       data-src=&quot;https</summary>
      
    
    
    
    <category term="æ•°ç " scheme="http://zhen-ke.github.io/categories/%E6%95%B0%E7%A0%81/"/>
    
    
    <category term="è‹¹æœ" scheme="http://zhen-ke.github.io/tags/%E8%8B%B9%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ GitHub Action è‡ªåŠ¨éƒ¨ç½² Hexo</title>
    <link href="http://zhen-ke.github.io/2021/04/01/github-action-automatic-hexo/"/>
    <id>http://zhen-ke.github.io/2021/04/01/github-action-automatic-hexo/</id>
    <published>2021-04-01T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ³¨æ„ï¼šéœ€è¦åˆ›å»ºä¸¤ä¸ªä»“åº“</p></blockquote><ul><li><code>your_blog_name.github.io</code>ï¼šç¼–è¯‘åçš„ä»“åº“ï¼ˆæœ¬æ¬¡æ•™ç¨‹æ²¡æœ‰æ¶‰åŠï¼Œç½‘ä¸Šæœä¸‹å°±æœ‰ï¼‰</li><li><code>hexo_blog</code>ï¼š <code>hexo</code> ç”Ÿæˆ <code>blog</code> çš„ä»“åº“ï¼ˆæœ¬æ¬¡æ•™ç¨‹é‡ç‚¹ä¼šåœ¨è¿™é‡Œï¼‰</li></ul><span id="more"></span><h2 id="åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ"><a href="#åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ" class="headerlink" title="åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ"></a>åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ</h2><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/01.png"                        alt="access-token-1"                 ></p><p><strong>æ³¨æ„è¦å‹¾é€‰<code>repo</code>æƒé™å’Œ<code>workflow</code>æƒé™</strong></p><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/02.png"                        alt="access-token-2"                 ></p><blockquote><p>æ³¨æ„ï¼šç”Ÿæˆ<code>TOKEN</code>åè¦å¤åˆ¶åä¿å­˜å¥½ï¼Œå› ä¸ºåœ¨ä¸‹æ¬¡è¿›æ¥æ—¶è¿™ä¸ªå€¼å°±çœ‹ä¸åˆ°äº†</p></blockquote><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/02-01.png"                        alt="access-token-2-01"                 ></p><h2 id="æ–°å»º-Hexo-Blog-ä»“åº“"><a href="#æ–°å»º-Hexo-Blog-ä»“åº“" class="headerlink" title="æ–°å»º Hexo Blog ä»“åº“"></a>æ–°å»º Hexo Blog ä»“åº“</h2><p>å»ºè®®ä½¿ç”¨<code>private</code>æ¥å»ºï¼Œé˜²æ­¢å…¶å®ƒäººå…‹éš†</p><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/03.png"                        alt="access-token-3"                 ></p><h2 id="è®¾ç½®ä»“åº“çš„secrets"><a href="#è®¾ç½®ä»“åº“çš„secrets" class="headerlink" title="è®¾ç½®ä»“åº“çš„secrets"></a>è®¾ç½®ä»“åº“çš„<code>secrets</code></h2><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/04.png"                        alt="access-token-4"                 ></p><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/05.png"                        alt="access-token-5"                 ></p><p>å–åä¸º <code>ACCESS_TOKEN</code> åé¢éƒ¨ç½²çš„æ—¶å€™ä¼šç”¨åˆ°</p><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/06.png"                        alt="access-token-6"                 ></p><h2 id="é…ç½®-config-yml"><a href="#é…ç½®-config-yml" class="headerlink" title="é…ç½® _config.yml"></a>é…ç½® <code>_config.yml</code></h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://ACCESS_TOKEN@github.com/your_github_name/your_blog_name.github.io.git</span> <span class="comment">#è¿™é‡Œçš„ACCESS_TOKENå°±æ˜¯æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„åç§°</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span> <span class="comment">#æ­¤å¤„ä¿®æ”¹ä¸ºè‡ªå·±å­˜æ”¾ your_blog_name.github.io çš„åˆ†æ”¯</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»º-Workflow"><a href="#åˆ›å»º-Workflow" class="headerlink" title="åˆ›å»º Workflow"></a>åˆ›å»º Workflow</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">GIT_USER:</span> <span class="string">your_github_name</span> <span class="comment">#ä½ çš„ github ç”¨æˆ·å</span></span><br><span class="line">  <span class="attr">GIT_EMAIL:</span> <span class="string">your@email.com</span> <span class="comment">#ä½ çš„ github é‚®ç®±</span></span><br><span class="line">  <span class="attr">DEPLOY_BRANCH:</span> <span class="string">main</span> <span class="comment">#æ­¤å¤„ä¿®æ”¹ä¸ºè‡ªå·±å­˜æ”¾ Hexo æºæ–‡ä»¶çš„åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Download</span> <span class="string">Source</span> <span class="string">file</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">$&#123;&#123;</span> <span class="string">env.DEPLOY_BRANCH</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;12&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">env</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACCESS_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.email $GIT_USER</span></span><br><span class="line"><span class="string">          git config --global user.name $GIT_EMAIL</span></span><br><span class="line"><span class="string">          sed -i &quot;s/ACCESS_TOKEN/$ACCESS_TOKEN/g&quot; ./_config.yml</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Setup</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>é»˜è®¤æ¨é€åå°±ä¼šæ‰§è¡Œ <code>Workflow</code></p><p><img                         lazyload                       alt="image"                       data-src="/images/github-action-automatic-hexo/07.png"                        alt="access-token-7"                 ></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šéœ€è¦åˆ›å»ºä¸¤ä¸ªä»“åº“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;your_blog_name.github.io&lt;/code&gt;ï¼šç¼–è¯‘åçš„ä»“åº“ï¼ˆæœ¬æ¬¡æ•™ç¨‹æ²¡æœ‰æ¶‰åŠï¼Œç½‘ä¸Šæœä¸‹å°±æœ‰ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hexo_blog&lt;/code&gt;ï¼š &lt;code&gt;hexo&lt;/code&gt; ç”Ÿæˆ &lt;code&gt;blog&lt;/code&gt; çš„ä»“åº“ï¼ˆæœ¬æ¬¡æ•™ç¨‹é‡ç‚¹ä¼šåœ¨è¿™é‡Œï¼‰&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="GitHub Action" scheme="http://zhen-ke.github.io/categories/GitHub-Action/"/>
    
    
    <category term="hexo" scheme="http://zhen-ke.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>webpack å­¦ä¹ ç¬”è®°</title>
    <link href="http://zhen-ke.github.io/2019/11/23/webpack-study-notes/"/>
    <id>http://zhen-ke.github.io/2019/11/23/webpack-study-notes/</id>
    <published>2019-11-23T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.620Z</updated>
    
    <content type="html"><![CDATA[<h2 id="webpack-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#webpack-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="webpack æ˜¯ä»€ä¹ˆï¼Ÿ"></a>webpack æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å®ƒæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·</p><h2 id="Loader-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Loader-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Loader æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Loader æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>webpack ä¸èƒ½è¯†åˆ« JavaScript ä¹‹å¤–çš„æ–‡ä»¶ï¼Œéœ€è¦ loader å¯¹å®ƒæ—¶è¡Œè¯†åˆ«</p><h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>file-loader å°±æ˜¯åœ¨ JavaScript ä»£ç é‡Œ import&#x2F;require ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¼šå°†è¯¥æ–‡ä»¶ç”Ÿæˆåˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶ä¸”åœ¨ JavaScript ä»£ç é‡Œè¿”å›è¯¥æ–‡ä»¶çš„åœ°å€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|jpeg|gif|svg)/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="comment">// placeholders å ä½ç¬¦</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;[name].[ext]&quot;</span>, <span class="comment">// è‡ªå®šä¹‰æ‰“åŒ…æ–‡ä»¶å</span></span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&quot;images/&quot;</span>, <span class="comment">// è‡ªå®šä¹‰è¾“å‡ºç›®å½•</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>url-loader åŠŸèƒ½ç±»ä¼¼äº file-loaderï¼Œä½†æ˜¯åœ¨æ–‡ä»¶å¤§å°ï¼ˆå•ä½ byteï¼‰ä½äºæŒ‡å®šçš„é™åˆ¶æ—¶ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ª DataURLã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;url-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">limit</span>: <span class="number">8192</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤„ç†-Sass"><a href="#å¤„ç†-Sass" class="headerlink" title="å¤„ç† Sass"></a>å¤„ç† Sass</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="comment">// å¤„ç†è¿‡ç¨‹æ˜¯ä»ä¸‹åˆ°ä¸Šçš„ï¼Œä»å³åˆ°å·¦çš„</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span>, <span class="comment">// style-loader ä¼šåœ¨ head é‡Œæ’å…¥ä¸€ä¸ª `&lt;style&gt;` æ ‡ç­¾ï¼Œå¹¶ä¸”å°† CSS å†™å…¥è¿™ä¸ªæ ‡ç­¾å†…ã€‚</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span>, <span class="comment">// å°† CSS è½¬åŒ–æˆ CommonJS æ¨¡å—</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;sass-loader&quot;</span>, <span class="comment">// å°† Sass ç¼–è¯‘æˆ CSS</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>, <span class="comment">// æ·»åŠ ç§æœ‰å±æ€§</span></span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&quot;autoprefixer&quot;</span>)(&#123;&#125;)],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¤„ç†-CSS"><a href="#å¤„ç†-CSS" class="headerlink" title="å¤„ç† CSS"></a>å¤„ç† CSS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(css)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Plugins-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Plugins-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Plugins æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Plugins æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨ webpack è¿è¡Œåˆ°æŸä¸ªæ—¶åˆ»çš„æ—¶åšä¸€äº›äº‹æƒ…</p><h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h3><p>ä¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ç”Ÿæˆçš„ JS æ–‡ä»¶è‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ª html æ–‡ä»¶é‡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;index_bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./src/index.html&quot;</span>, <span class="comment">// é€šè¿‡æ¨¡æ¿æ¥ç”Ÿæˆhtml</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h3><p>ç”¨äºåœ¨ä¸‹ä¸€æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤ä¹‹å‰æ‰“åŒ…çš„æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;clean-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;index_bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="SourceMap"><a href="#SourceMap" class="headerlink" title="SourceMap"></a>SourceMap</h2><p>å¯ä»¥å°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ï¼Œç”¨æ¥è¿½è¸ªåˆ° error(é”™è¯¯) å’Œ warning(è­¦å‘Š) åœ¨æºä»£ç ä¸­çš„åŸå§‹ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// inline-source-map: ä¸ç”Ÿæˆ.mapæ–‡ä»¶ï¼Œä¼šä»¥ base64 çš„å­—ç¬¦ä¸²åŠ å…¥åˆ°æ‰“åŒ…æ–‡ä»¶ä¸­,æŠ¥é”™ä¿¡æ¯ä¼šç²¾ç¡®åˆ°è¡Œå’Œåˆ—</span></span><br><span class="line"><span class="comment">// cheap-inline-source-map: ä¸ç”Ÿæˆ.mapæ–‡ä»¶ï¼Œä¼šä»¥ base64 çš„å­—ç¬¦ä¸²åŠ å…¥åˆ°æ‰“åŒ…æ–‡ä»¶ä¸­,æŠ¥é”™ä¿¡æ¯åªä¼šç²¾ç¡®åˆ°è¡Œï¼ˆæ‰“åŒ…æ€§èƒ½ä¼šæå‡ï¼‰</span></span><br><span class="line"><span class="comment">// cheap-module-eval-source-mapï¼š é»˜è®¤å®ƒåªä¼šå¤„ç†ä¸šåŠ¡ä¸­é”™è¯¯ï¼Œä¸ä¼šå¤„ç†moduleé‡Œé”™è¯¯ï¼Œå¦‚æœåŠ å…¥moduleï¼Œå°±ä¼šå¤„ç†ç¬¬ä¸‰æ–¹æ¨¡å—çš„é”™è¯¯</span></span><br><span class="line"><span class="comment">// evalï¼šè¿™ç§æ‰“åŒ…æ–¹å¼æœ€å¿«ï¼Œæ€§èƒ½æœ€å¥½,ä½†é”™è¯¯æç¤ºæ¯”è¾ƒå¼±</span></span><br></pre></td></tr></table></figure><p>æœ€ä½³å®è·µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devtool</span>:<span class="string">&quot;cheap-module-eval-source-map&quot;</span>,<span class="comment">// å¼€å‘ç¯å¢ƒé…ç½®</span></span><br><span class="line"><span class="attr">devtool</span>:<span class="string">&quot;cheap-module-source-map&quot;</span>,   <span class="comment">// çº¿ä¸Šç”Ÿæˆé…ç½®</span></span><br></pre></td></tr></table></figure><h2 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;dist&quot;</span>), <span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä½œä¸ºæä¾›å†…å®¹çš„ç›®å½•ã€‚</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// å‘Šè¯‰ dev-server åœ¨ server å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨ã€‚é»˜è®¤ç¦ç”¨ã€‚</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Hot-Module-Replacement"><a href="#Hot-Module-Replacement" class="headerlink" title="Hot Module Replacement"></a>Hot Module Replacement</h2><p>å®ƒå…è®¸åœ¨é¡¹ç›®åœ¨ä¿®æ”¹çš„æ—¶å€™ï¼Œæ— éœ€å®Œå…¨åˆ·æ–°é¡µé¢ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// å¯ç”¨ HMR</span></span><br><span class="line">    <span class="attr">hotOnly</span>: <span class="literal">true</span>, <span class="comment">// åœ¨ HMR å¤±æ•ˆæ—¶ï¼Œä¸ä¼šåˆ·æ–°é¡µé¢</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-Bable-ç¼–è¯‘-ES6"><a href="#ä½¿ç”¨-Bable-ç¼–è¯‘-ES6" class="headerlink" title="ä½¿ç”¨ Bable ç¼–è¯‘ ES6"></a>ä½¿ç”¨ Bable ç¼–è¯‘ ES6</h2><p>bable è½¬ ES6 ç›¸å…³ï¼š</p><ol><li><code>babel-loader</code>: è´Ÿè´£ es6 è¯­æ³•è½¬åŒ–</li><li><code>babel-preset-env</code>: åŒ…å« es6ã€7 ç­‰ç‰ˆæœ¬çš„è¯­æ³•è½¬åŒ–è§„åˆ™</li><li><code>babel-polyfill</code>: es6 å†…ç½®æ–¹æ³•å’Œå‡½æ•°è½¬åŒ–å«ç‰‡</li><li><code>babel-plugin-transform-runtime</code>: é¿å… polyfill æ±¡æŸ“å…¨å±€å˜é‡</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯, <code>babel-loader</code>å’Œ<code>babel-polyfill</code>ã€‚å‰è€…è´Ÿè´£è¯­æ³•è½¬åŒ–ï¼Œæ¯”å¦‚ï¼šç®­å¤´å‡½æ•°ï¼›åè€…è´Ÿè´£å†…ç½®æ–¹æ³•å’Œå‡½æ•°ï¼Œæ¯”å¦‚ï¼š<code>new Set()</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-loader @babel/core</span><br><span class="line">npm install @babel/preset-env --save-dev</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">presets</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å¯¹<code>Promiseã€map</code> ä¹‹ç±»çš„æ–¹æ³•åšå…¼å®¹å¤„ç†åˆ™éœ€è¦å®‰è£…<code>babel-polyfill</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @babel/polyfill</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">presets</span>: [</span><br><span class="line">          [<span class="string">&quot;@babel/preset-env&quot;</span>],</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">targets</span>: &#123;</span><br><span class="line">              <span class="comment">// æ ¹æ®ç›®æ ‡ç‰ˆæœ¬å·é€‰æ‹©æ˜¯å¦è¦è¿›è¡Œè½¬æ¢</span></span><br><span class="line">              <span class="attr">edge</span>: <span class="string">&quot;17&quot;</span>,</span><br><span class="line">              <span class="attr">firefox</span>: <span class="string">&quot;60&quot;</span>,</span><br><span class="line">              <span class="attr">chrome</span>: <span class="string">&quot;67&quot;</span>,</span><br><span class="line">              <span class="attr">safari</span>: <span class="string">&quot;11.1&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">useBuiltIns</span>: <span class="string">&quot;usage&quot;</span>, <span class="comment">// æŒ‰éœ€å¼•å…¥polyfill,è¿™æ ·èƒ½å¤§å¤§å‡å°‘æ‰“åŒ…ç¼–è¯‘åçš„ä½“ç§¯</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨ <code>&quot;useBuiltIns&quot;: &quot;usage&quot;</code>åï¼Œä¸éœ€è¦åœ¨é¡¹ç›®é‡Œåœ¨å¼•å…¥<code>import &#39;@babel/polyfill&#39;</code></p><p>é»˜è®¤<code>polyfill</code>ä¼šæ±¡æŸ“å…¨å±€å˜é‡ï¼Œå¦‚æœå¼€å‘ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—æˆ–è€…åº“çš„æ—¶å€™åˆ™éœ€è¦ç”¨<code>@babel/runtime</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @babel/runtime</span><br><span class="line">npm install --save @babel/runtime-corejs2</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">          [</span><br><span class="line">            <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">absoluteRuntime</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="attr">corejs</span>: <span class="number">2</span>,</span><br><span class="line">              <span class="attr">helpers</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">regenerator</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">useESModules</span>: <span class="literal">false</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœé…ç½®æ–‡ä»¶è¾ƒå¤šæ—¶ï¼Œå¯ä»¥é¡¹ç›®å†…æ–°å»ºä¸€ä¸ª<code>.babelrc</code>ï¼Œç„¶åæŠŠ<code>options</code>é‡Œçš„å†…å®¹æ”¾è¿›å»</p><p><code>.babelrc</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">&quot;plugins&quot;</span> : [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;absoluteRuntime&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;corejs&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;helpers&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;regenerator&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;useESModules&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>wepback.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h2><p>æ¸…é™¤åˆ°ä»£ç ä¸­æ— ç”¨çš„<code>js</code>ä»£ç ï¼Œåªæ”¯æŒ<code>ES Module</code>,ä¹Ÿå°±æ˜¯åªæ”¯æŒ<code>import</code>ï¼ˆé™æ€å¼•å…¥ï¼‰æ–¹å¼å¼•å…¥ï¼Œä¸æ”¯æŒ<code>CommonJS</code>ï¼ˆåŠ¨æ€å¼•å…¥ï¼‰çš„æ–¹å¼å¼•å…¥</p><p>åœ¨<code>mode</code>æ˜¯<code>production</code>æ—¶å°±ä¼šè¿›è¡Œ<code>Tree Shaking</code>ï¼Œä¸ºäº†æ–¹ä¾¿ä½ çš„è°ƒè¯•å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="attr">usedExports</span>: <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡å¦‚æˆ‘ä»¬åœ¨æŸä¸ªæ¨¡å—é‡Œéœ€è¦å¼•å…¥ä¸€ä¸ªåº“æˆ–è€…cssæ–‡ä»¶ï¼Œä½†å®ƒæ²¡æœ‰å¯¼å‡ºä»»ä½•ä¸œè¥¿æ—¶ï¼ŒTree Shaking ä¼šå¿½ç•¥æ‰å®ƒï¼Œè¿™æ—¶éœ€è¦è¿›è¡Œæ‰‹åŠ¨è®¾ç½®ï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line"></span><br><span class="line">sideEffects<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span> <span class="comment">// false å¯¹æ‰€æœ‰æ¨¡å—è¿›è¡Œ Tree Shaking</span></span><br><span class="line">sideEffects<span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@babel/polyfill&quot;</span><span class="punctuation">]</span> <span class="comment">// ä¸è¦å¯¹ @babel/polyfill è¿›è¡Œ Tree Shaking</span></span><br><span class="line">sideEffects<span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*.css&quot;</span><span class="punctuation">]</span> <span class="comment">// ä¸è¦å¯¹ css è¿›è¡Œ Tree Shaking</span></span><br></pre></td></tr></table></figure><h2 id="Code-Splitting"><a href="#Code-Splitting" class="headerlink" title="Code Splitting"></a>Code Splitting</h2><p>å¼‚æ­¥çš„ä»£ç  ï¼ˆ<code>import</code>ï¼‰<code>webpack</code>ä¼šè‡ªåŠ¨çš„è¿›è¡Œä»£ç åˆ†å‰²ï¼ŒåŒæ­¥ä»£ç åˆ™éœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">optimization</span>: &#123;</span><br><span class="line">  <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">    <span class="attr">chunks</span>: <span class="string">&quot;all&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SplitChunksPlugin-é…ç½®è¯¦è§£"><a href="#SplitChunksPlugin-é…ç½®è¯¦è§£" class="headerlink" title="SplitChunksPlugin é…ç½®è¯¦è§£"></a>SplitChunksPlugin é…ç½®è¯¦è§£</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&quot;async&quot;</span>, <span class="comment">// allï¼šæ‰€æœ‰ä»£ç ç”Ÿæ•ˆã€asyncï¼šåªå¯¹å¼‚æ­¥ä»£ç ç”Ÿæ•ˆã€initialï¼šåªå¯¹åŒæ­¥ä»£ç ç”Ÿæ•ˆ</span></span><br><span class="line">      <span class="attr">minSize</span>: <span class="number">30000</span>, <span class="comment">// 30kb å¤§ä½™æŸä¸ªå€¼æ‰ä¼šåšä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="attr">minRemainingSize</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">maxSize</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">minChunks</span>: <span class="number">1</span>, <span class="comment">// å½“å¯¹ä¸€ä¸ªæ¨¡å—ç”¨äº†å¤šå°‘æ¬¡çš„æ—¶å€™æ‰è¿›è¡Œä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="attr">maxAsyncRequests</span>: <span class="number">6</span>,</span><br><span class="line">      <span class="attr">maxInitialRequests</span>: <span class="number">4</span>, <span class="comment">// å…¥å£æ–‡ä»¶è¯·æ±‚æ•°é‡è¶…è¿‡4ä¸ªæ—¶å°±ä¸ä¼šè¿›è¡Œä»£ç åˆ†å‰²</span></span><br><span class="line">      <span class="attr">automaticNameDelimiter</span>: <span class="string">&quot;~&quot;</span>, <span class="comment">// æ‰“åŒ…åæ–‡ä»¶åçš„è¿æ¥ç¬¦</span></span><br><span class="line">      <span class="attr">automaticNameMaxLength</span>: <span class="number">30</span>,</span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="comment">// ç¼“å­˜ç»„ï¼Œæ ¹æ®cacheGroupsæ¥åˆ¤æ–­å°†æ‰“åŒ…æ–‡ä»¶æ”¾åˆ°å“ªä¸ªæ–‡ä»¶é‡Œå»</span></span><br><span class="line">        <span class="attr">vendors</span>: &#123;</span><br><span class="line">          <span class="comment">// vendors ç»„</span></span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">10</span>, <span class="comment">// æƒé‡ï¼Œæ•°å€¼è¶Šå¤§æƒé‡åˆ™è¶Šå¤§</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">default</span>: &#123;</span><br><span class="line">          <span class="comment">// default ç»„</span></span><br><span class="line">          <span class="attr">minChunks</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">priority</span>: -<span class="number">20</span>,</span><br><span class="line">          <span class="attr">reuseExistingChunk</span>: <span class="literal">true</span>, <span class="comment">// å¦‚æœæŸä¸ªæ¨¡å—å·²ç»è¢«æ‰“åŒ…è¿‡äº†ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å°±å¿½ç•¥ï¼Œç›´æ¥å¼•ç”¨ä¹‹å‰çš„</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯¹ä»£ç è¿›è¡Œä»£ç åˆ†å‰²ï¼Œå®ƒä¼šå»çœ‹<code>cacheGroups.vendors</code>è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœæ˜¯<code>false</code>åˆ™ä¸ä¼šè¿›è¡Œä»£ç åˆ†å‰²ï¼Œåä¹‹ï¼Œå¦‚æœå¼•å…¥çš„åº“æ˜¯<code>cacheGroups.vendors.test</code>é‡Œçš„ï¼Œåˆ™ä¼šä»£ç åˆ†å‰²ï¼Œå¦‚æœä¸æ˜¯<code>cacheGroups.vendors.test</code>é‡Œçš„ï¼Œä¼šå»çœ‹<code>cacheGroups.default</code>è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœæ˜¯<code>false</code>åˆ™ä¸ä¼šè¿›è¡Œä»£ç åˆ†å‰²ï¼Œåä¹‹åˆ™ä¼š</p><h3 id="ä¸ºä»€ä¹ˆ-splitChunks-chunks-çš„é»˜è®¤å€¼æ˜¯async"><a href="#ä¸ºä»€ä¹ˆ-splitChunks-chunks-çš„é»˜è®¤å€¼æ˜¯async" class="headerlink" title="ä¸ºä»€ä¹ˆ splitChunks.chunks çš„é»˜è®¤å€¼æ˜¯async"></a>ä¸ºä»€ä¹ˆ <code>splitChunks.chunks</code> çš„é»˜è®¤å€¼æ˜¯<code>async</code></h3><p>å› ä¸ºå¼‚æ­¥çš„ä»£ç æ‰èƒ½æé«˜æ‰“åŒ…çš„æ€§èƒ½ï¼Œè€ŒåŒæ­¥ä»£ç åˆ™åªèƒ½å¢åŠ ç¼“å­˜</p><h3 id="CSS-Code-Splitting"><a href="#CSS-Code-Splitting" class="headerlink" title="CSS Code Splitting"></a>CSS Code Splitting</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br></pre></td></tr></table></figure><p><strong>webpack.config.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&quot;[name].css&quot;</span>, <span class="comment">// å¦‚æœæ˜¯è¢«ç›´æ¥å¼•ç”¨çš„å°±èµ°è¿™é‡Œ</span></span><br><span class="line">      <span class="attr">chunkFilename</span>: <span class="string">&quot;[id].css&quot;</span>, <span class="comment">// å¦‚æœæ˜¯è¢«é—´æ¥å¼•ç”¨çš„å°±èµ°è¿™é‡Œ</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="comment">// æ›¿æ¢ style-loaderï¼Œç›®å‰åªé€‚åˆåœ¨çº¿ä¸Šç¯å¢ƒä½¿ç”¨ï¼Œå› ä¸ºä¸æ”¯æŒHMR</span></span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">publicPath</span>: <span class="string">&quot;../&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;css-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="prefetch-preload-module"><a href="#prefetch-preload-module" class="headerlink" title="prefetch&#x2F;preload module"></a>prefetch&#x2F;preload module</h2><p>åœ¨å£°æ˜ import æ—¶ï¼Œä½¿ç”¨ä¸‹é¢è¿™äº›å†…ç½®æŒ‡ä»¤ï¼Œå¯ä»¥è®© webpack è¾“å‡º â€œresource hint(èµ„æºæç¤º)â€ï¼Œæ¥å‘ŠçŸ¥æµè§ˆå™¨ï¼š</p><ul><li>prefetch(é¢„å–)ï¼šå½“æ ¸å¿ƒä»£ä¸šåŠ¡ä»£ç åŠ è½½å®Œæˆåï¼Œç©ºé—²æ—¶å€™ååœ¨åŠ è½½éœ€è¦çš„èµ„æº</li><li>preload(é¢„åŠ è½½)ï¼šå’Œæ ¸å¿ƒä»£ä¸šåŠ¡ä»£ç ä¸€èµ·è¿›è¡Œå¹¶è¡ŒåŠ è½½</li></ul><p>ä¸‹é¢è¿™ä¸ª prefetch çš„ç®€å•ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>HomePage</code> ç»„ä»¶ï¼Œå…¶å†…éƒ¨æ¸²æŸ“ä¸€ä¸ª <code>LoginButton</code> ç»„ä»¶ï¼Œç„¶ååœ¨ç‚¹å‡»åæŒ‰éœ€åŠ è½½ <code>LoginModal</code> ç»„ä»¶ã€‚</p><p><strong>LoginButton.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackPrefetch: true */</span> <span class="string">&quot;LoginModal&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¼šç”Ÿæˆ <code>&lt;link rel=&quot;prefetch&quot; href=&quot;login-modal-chunk.js&quot;&gt;</code> å¹¶è¿½åŠ åˆ°é¡µé¢å¤´éƒ¨ï¼ŒæŒ‡ç¤ºç€æµè§ˆå™¨åœ¨é—²ç½®æ—¶é—´é¢„å–<code> login-modal-chunk.js</code> æ–‡ä»¶ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;webpack-æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#webpack-æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;webpack æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;webpack æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;p&gt;å®ƒæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·&lt;/p&gt;
&lt;h2 id=&quot;Loader-æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#Loader-æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Loader æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;Loader æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;p&gt;webpack ä¸èƒ½è¯†åˆ« JavaScript ä¹‹å¤–çš„æ–‡ä»¶ï¼Œéœ€è¦ loader å¯¹å®ƒæ—¶è¡Œè¯†åˆ«&lt;/p&gt;
&lt;h3 id=&quot;file-loader&quot;&gt;&lt;a href=&quot;#file-loader&quot; class=&quot;headerlink&quot; title=&quot;file-loader&quot;&gt;&lt;/a&gt;file-loader&lt;/h3&gt;&lt;p&gt;file-loader å°±æ˜¯åœ¨ JavaScript ä»£ç é‡Œ import&amp;#x2F;require ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¼šå°†è¯¥æ–‡ä»¶ç”Ÿæˆåˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶ä¸”åœ¨ JavaScript ä»£ç é‡Œè¿”å›è¯¥æ–‡ä»¶çš„åœ°å€ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;module&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;exports&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;module&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;rules&lt;/span&gt;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;test&lt;/span&gt;: &lt;span class=&quot;regexp&quot;&gt;/&#92;.(png|jpg|jpeg|gif|svg)/&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;use&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;attr&quot;&gt;loader&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;quot;file-loader&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;attr&quot;&gt;options&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// placeholders å ä½ç¬¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;quot;[name].[ext]&amp;quot;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// è‡ªå®šä¹‰æ‰“åŒ…æ–‡ä»¶å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;outputPath&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;quot;images/&amp;quot;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;// è‡ªå®šä¹‰è¾“å‡ºç›®å½•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/tags/Web-Developer/"/>
    
  </entry>
  
  <entry>
    <title>ffmpegGUI å¼€å‘ç¬”è®°</title>
    <link href="http://zhen-ke.github.io/2019/06/17/ffmpeggui-development-notes/"/>
    <id>http://zhen-ke.github.io/2019/06/17/ffmpeggui-development-notes/</id>
    <published>2019-06-17T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ"><a href="#å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ"></a>å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ</h2><p><strong>æ³¨æ„ï¼š</strong> åœ¨å¼€å¯ç¡¬ä»¶åŠ é€Ÿæ—¶ï¼Œè½¬ç çš„é€Ÿåº¦è™½ç„¶å¿«äº†ï¼Œä½†è§†é¢‘è´¨é‡ä¼šå‡ºç°å¤§å¹…ä¸‹æ»‘ï¼Œç›®å‰è§£å†³åŠæ³•åªèƒ½é€šè¿‡è®¾ç½®é«˜ç ç‡æ¥è§£å†³ï¼Œç›®å‰æˆ‘çš„åšæ³•æ˜¯åœ¨åŸç ç‡çš„åŸºç¡€ä¸Šæé«˜ 1.5 å€ï¼ŒåŸºæœ¬èƒ½ä¿è¯è§†é¢‘è´¨é‡ï¼Œä½†ä½“ç§¯ä¹Ÿä¼šå¢åŠ  1.5 å€ï¼ˆå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•è¯·å‘Šè¯‰æˆ‘ï¼‰</p><p>ä»¥æˆ‘è¿™ä¸ªé¡¹ç›®ä¸ºä¾‹ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ <code>ffmpeg -hwaccels</code> æ¥è·å–å½“å‰æœºå™¨æ”¯æŒå“ªäº›ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ï¼Œä¸åŒçš„å¹³å°å¼€å¯ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ä¸ä¸€æ ·</p><p>æŸ¥çœ‹æœºå™¨æ”¯æŒçš„ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nodeå­è¿›ç¨‹çš„æ–¹å¼</span></span><br><span class="line"><span class="keyword">let</span> exec = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>).<span class="property">exec</span>;</span><br><span class="line"><span class="title function_">exec</span>(<span class="string">`<span class="subst">$&#123;ffmpegPath&#125;</span> -hwaccels`</span>, <span class="function">(<span class="params">err, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(stdout); <span class="comment">// Hardware acceleration methods: videotoolbox</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸç”Ÿffmpegçš„æ–¹å¼</span></span><br><span class="line">ffmpeg - hwaccels;</span><br></pre></td></tr></table></figure><span id="more"></span><p>æŸ¥çœ‹æœºå™¨æ”¯æŒçš„ç¼–ç å™¨ï¼ˆencodersï¼‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nodeå­è¿›ç¨‹çš„æ–¹å¼</span></span><br><span class="line"><span class="keyword">let</span> exec = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>).<span class="property">exec</span>;</span><br><span class="line"><span class="title function_">exec</span>(<span class="string">`<span class="subst">$&#123;ffmpegPath&#125;</span> -encoders`</span>, <span class="function">(<span class="params">err, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(stdout);</span><br><span class="line">  <span class="comment">// è¿™é‡Œä¼šæ‰“å°å‡ºå¾ˆå¤šä¿¡æ¯ï¼Œåªéœ€è¦æ‰¾å‡ºå¸¦æœ‰ä¹‹å‰å¸¦æœ‰videotoolboxçš„å°±è¡Œï¼ˆè¿™é‡Œçš„ videotoolbox æ˜¯ä¸Šæ¬¡æŸ¥åˆ°çš„æ”¯æŒç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ï¼‰</span></span><br><span class="line">  <span class="comment">// ......</span></span><br><span class="line">  <span class="comment">// V..... h264_videotoolbox    VideoToolbox H.264 Encoder (codec h264)</span></span><br><span class="line">  <span class="comment">// V..... hevc_videotoolbox    VideoToolbox H.265 Encoder (codec hevc)</span></span><br><span class="line">  <span class="comment">// ......</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸç”Ÿffmpegçš„æ–¹å¼</span></span><br><span class="line">ffmpeg - encoders;</span><br></pre></td></tr></table></figure><p>æŠŠä¸Šé¢æŸ¥åˆ°çš„ç»“æœå¸¦åˆ°<code>ffmpeg</code> é‡Œæ‰§è¡Œå³å¯ï¼ˆä»¥ä¸‹ä»£ç æ˜¯æˆ‘é¡¹ç›®çš„ä¾‹å­ï¼Œå¦‚æœæ˜¯å‘½ä»¤çš„æ–¹å¼ï¼Œç›´æ¥å¸¦ä¸Šè¿™ä¸ªå‚æ•°æ‰§è¡Œå°±è¡Œï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">ffmpeg</span>()</span><br><span class="line">  .<span class="title function_">input</span>(<span class="string">&quot;/dev/video&quot;</span>)</span><br><span class="line">  .<span class="title function_">videoCodec</span>(<span class="string">&quot;h264_videotoolbox&quot;</span>) <span class="comment">// H264ï¼Œhevc_videotoolbox(h265)</span></span><br><span class="line">  .<span class="title function_">inputFormat</span>(<span class="string">&quot;mov&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸç”Ÿffmpegçš„æ–¹å¼</span></span><br><span class="line">ffmpeg -vcodec h264_videotoolbox</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±å¯ä»¥å¼€å¯ç¡¬ä»¶åŠ é€ŸåŠŸèƒ½äº†</p><h2 id="æ‰“åŒ…å-electron-é‡Œ-asar-ä¸èƒ½ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„é—®é¢˜"><a href="#æ‰“åŒ…å-electron-é‡Œ-asar-ä¸èƒ½ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„é—®é¢˜" class="headerlink" title="æ‰“åŒ…å electron é‡Œ asar ä¸èƒ½ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„é—®é¢˜"></a>æ‰“åŒ…å electron é‡Œ asar ä¸èƒ½ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„é—®é¢˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®å¤ electron asar ä¸èƒ½ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&quot;development&quot;</span>) &#123;</span><br><span class="line">  ffmpegPath = ffmpegPath.<span class="title function_">replace</span>(<span class="string">&quot;app.asar&quot;</span>, <span class="string">&quot;app.asar.unpacked&quot;</span>);</span><br><span class="line">  ffprobePath = ffprobePath.<span class="title function_">replace</span>(<span class="string">&quot;app.asar&quot;</span>, <span class="string">&quot;app.asar.unpacked&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ‰“å®ŒåŒ…åï¼Œä¼šæŠŠç›¸å…³çš„äºŒè¿›åˆ¶æ–‡ä»¶æ”¾åˆ°<code>app.asar.unpacked</code>é‡Œï¼Œé»˜è®¤ä¼šæ”¾åˆ°<code>app.asar</code>é‡Œ</p><p><img                         lazyload                       alt="image"                       data-src="/images/ffmpeggui-development-notes/screenshot-03.png"                        alt="screenshot3"                 ></p><h2 id="å¦‚ä½•é€šè¿‡-Webpack-æ‰“åŒ…ä¸åŒå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶åˆ°-APP-é‡Œ"><a href="#å¦‚ä½•é€šè¿‡-Webpack-æ‰“åŒ…ä¸åŒå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶åˆ°-APP-é‡Œ" class="headerlink" title="å¦‚ä½•é€šè¿‡ Webpack æ‰“åŒ…ä¸åŒå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶åˆ° APP é‡Œ"></a>å¦‚ä½•é€šè¿‡ Webpack æ‰“åŒ…ä¸åŒå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶åˆ° APP é‡Œ</h2><p>é¦–å…ˆé€šè¿‡ <code>process.platform</code>æ¥åˆ¤æ–­å¹³å°ï¼Œç„¶åç”¨ <code>CopyWebpackPlugin</code> æ’ä»¶ä» <code>node_modules</code> æŠŠç›¸å…³å¹³å°çš„çš„äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶å‡ºæ¥</p><p><strong>webpack.renderer.config</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> ffmpegBasePath = <span class="string">&quot;../node_modules/ffmpeg-static/bin/&quot;</span>; <span class="comment">// ffmpeg-static</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; platform &#125; = process;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ffmpegPathMap = &#123;</span><br><span class="line">    <span class="attr">darwin</span>: <span class="string">&quot;darwin/x64/ffmpeg&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> ffmpegPath = ffmpegBasePath + ffmpegPathMap[platform];</span><br><span class="line"></span><br><span class="line">  rendererConfig.<span class="property">plugins</span>.<span class="title function_">push</span>(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CopyWebpackPlugin</span>([</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">from</span>: path.<span class="title function_">join</span>(__dirname, ffmpegPath),</span><br><span class="line">        <span class="attr">to</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;../core&quot;</span>),</span><br><span class="line">        <span class="attr">ignore</span>: [<span class="string">&quot;.*&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ])</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒæ•´äºŒè¿›åˆ¶æ–‡ä»¶çš„æƒé™ï¼Œå¹¶è®¾ç½® <code>ffmpeg</code> çš„æ‰“åŒ…åçš„è·¯å¾„ï¼ˆå¤åˆ¶å‡ºæ¥çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¼¼ä¹æœ‰æƒé™é—®é¢˜ï¼‰</p><p><strong>core.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ffmpeg <span class="keyword">from</span> <span class="string">&quot;fluent-ffmpeg&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; resolve &#125; <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾å‡ºå¤åˆ¶å‡ºæ¥çš„è·¯å¾„</span></span><br><span class="line"><span class="keyword">let</span> basePath = <span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../../../core/&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&quot;production&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> realFfmpegPath = basePath + <span class="string">&quot;/ffmpeg&quot;</span>;</span><br><span class="line"></span><br><span class="line">  fs.<span class="title function_">stat</span>(realFfmpegPath, <span class="function">(<span class="params">err, stats</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœ ffmpegã€ffprobe é 777 æƒé™ï¼Œåˆ™è®¾ç½®æˆ 777</span></span><br><span class="line">    <span class="keyword">if</span> (stats.<span class="property">mode</span> !== <span class="number">33279</span>) &#123;</span><br><span class="line">      fs.<span class="title function_">chmod</span>(realFfmpegPath, <span class="string">&quot;0777&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ffmpeg ä¿®æ”¹æƒé™æˆåŠŸ&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  ffmpegPath = realFfmpegPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ffmpeg.<span class="title function_">setFfmpegPath</span>(ffmpegPath);</span><br></pre></td></tr></table></figure><p>æŠŠäºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…åˆ° APP é‡Œï¼ˆé€šè¿‡ <code>electron builder</code> çš„ <code>extraResources</code> æŠŠäºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´åˆ° APP é‡Œï¼‰</p><p><strong>package.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;mac&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extraResources&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./core/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./core/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img                         lazyload                       alt="image"                       data-src="/images/ffmpeggui-development-notes/screenshot-04.png"                        alt="screenshot4"                 ></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ&quot;&gt;&lt;a href=&quot;#å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ&quot;&gt;&lt;/a&gt;å¦‚ä½•å¼€å¯ç¡¬ä»¶åŠ é€Ÿ&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; åœ¨å¼€å¯ç¡¬ä»¶åŠ é€Ÿæ—¶ï¼Œè½¬ç çš„é€Ÿåº¦è™½ç„¶å¿«äº†ï¼Œä½†è§†é¢‘è´¨é‡ä¼šå‡ºç°å¤§å¹…ä¸‹æ»‘ï¼Œç›®å‰è§£å†³åŠæ³•åªèƒ½é€šè¿‡è®¾ç½®é«˜ç ç‡æ¥è§£å†³ï¼Œç›®å‰æˆ‘çš„åšæ³•æ˜¯åœ¨åŸç ç‡çš„åŸºç¡€ä¸Šæé«˜ 1.5 å€ï¼ŒåŸºæœ¬èƒ½ä¿è¯è§†é¢‘è´¨é‡ï¼Œä½†ä½“ç§¯ä¹Ÿä¼šå¢åŠ  1.5 å€ï¼ˆå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•è¯·å‘Šè¯‰æˆ‘ï¼‰&lt;/p&gt;
&lt;p&gt;ä»¥æˆ‘è¿™ä¸ªé¡¹ç›®ä¸ºä¾‹ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œ &lt;code&gt;ffmpeg -hwaccels&lt;/code&gt; æ¥è·å–å½“å‰æœºå™¨æ”¯æŒå“ªäº›ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ï¼Œä¸åŒçš„å¹³å°å¼€å¯ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ä¸ä¸€æ ·&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æœºå™¨æ”¯æŒçš„ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// nodeå­è¿›ç¨‹çš„æ–¹å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; exec = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;child_process&amp;quot;&lt;/span&gt;).&lt;span class=&quot;property&quot;&gt;exec&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;exec&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;`&lt;span class=&quot;subst&quot;&gt;$&amp;#123;ffmpegPath&amp;#125;&lt;/span&gt; -hwaccels`&lt;/span&gt;, &lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;err, stdout, stderr&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(stdout); &lt;span class=&quot;comment&quot;&gt;// Hardware acceleration methods: videotoolbox&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åŸç”Ÿffmpegçš„æ–¹å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ffmpeg - hwaccels;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="ffmpeg" scheme="http://zhen-ke.github.io/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>è®° React ä¸­ä¸€æ¬¡å¤ç”¨ä¸å°è£…</title>
    <link href="http://zhen-ke.github.io/2019/04/19/react-hoc/"/>
    <id>http://zhen-ke.github.io/2019/04/19/react-hoc/</id>
    <published>2019-04-19T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h3><p>æœ€è¿‘å‘ç°è‡ªå·±ä¸€ç›´åœ¨å†™å¾ˆå¤šé‡å¤æ€§çš„ä»£ç ï¼Œæ¯”ä¾‹å…¬å¸çš„æŸä¸ªé¡¹ç›®çš„æœç´¢æ æœ‰å¾ˆå¤šçš„ä¸‹æ‹‰é€‰æ‹©å™¨,è€Œæˆ‘çš„åšæ³•æ˜¯ä¸åœçš„åˆå§‹åŒ–storeã€é…ç½®apiã€å¼•å…¥selectç»„ä»¶ã€é…ç½®selectç»„ä»¶ï¼Œè¿™è¿˜åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¸‹æ‹‰é€‰æ‹©å™¨ï¼Œå¦‚æœæœ‰å¤šä¸ªå°±è§‰å¾—è¿™ä¹ˆå†™æ˜¯ä¸æ˜¯å¾ˆå‚»ï¼Œæ‰€ä»¥æœ€è¿‘ä¸€ç›´åœ¨è€ƒè™‘å¦‚æœä¼˜åŒ–ã€‚</p><p>å½“é‡å¤æ€§çš„å·¥ä½œè¿‡å¤šçš„æ—¶å€™ï¼Œå°±åº”è¯¥è€ƒè™‘è‡ªå·±çš„ä»£ç å†™çš„æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ã€‚</p><blockquote><p>å°è£…ï¼šæŠŠå®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ï¼Œéšè—å±æ€§å’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£ã€‚</p></blockquote><p>åˆæ­¥æƒ³æ³•æ˜¯å‡å°‘é‡å¤æ€§çš„å·¥ä½œï¼Œè€Œç›®å‰æˆ‘èƒ½æƒ³åˆ°çš„è§£æ³•æ–¹æ³•æœ‰å‡ ä¸ªï¼š</p><ul><li>ç”¨ class æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶ï¼ˆè¿™ç§æœ€ç®€å•ä¹Ÿæœ€å®ç”¨ï¼‰</li><li>ç”¨ HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶</li><li>ç”¨ Render Props ï¼ˆå‡½æ•°å­ç»„ä»¶ FaCCï¼‰æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶</li></ul><span id="more"></span><h3 id="ç”¨é«˜é˜¶ç»„ä»¶å®ç°"><a href="#ç”¨é«˜é˜¶ç»„ä»¶å®ç°" class="headerlink" title="ç”¨é«˜é˜¶ç»„ä»¶å®ç°"></a>ç”¨é«˜é˜¶ç»„ä»¶å®ç°</h3><p>ç¼–å†™ componentSelect ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Select</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">WithClassName</span> = <span class="title class_">WrappedComponent</span> =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">HOC</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>(props);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">list</span>: []</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123; list &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">      <span class="keyword">let</span> &#123; valueName, labelName &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;list.map(it =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">WrappedComponent.Option</span> <span class="attr">value</span>=<span class="string">&#123;it[valueName]&#125;</span> <span class="attr">key</span>=<span class="string">&#123;it[valueName]&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;it[labelName]&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">WrappedComponent.Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">WrappedComponent</span>&gt;</span></span></span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123; params = &#123;&#125;, api = <span class="string">&quot;&quot;</span> &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">      axios</span><br><span class="line">        .<span class="title function_">get</span>(api, &#123;</span><br><span class="line">          ...params</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">it</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (it.<span class="property">resultObject</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">              <span class="attr">list</span>: it.<span class="property">resultObject</span></span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">WithClassName</span>(<span class="title class_">Select</span>);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ componentSelect ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ComponentSelect</span> <span class="keyword">from</span> <span class="string">&#x27;componentSelect&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">ComponentSelect</span></span><br><span class="line">  api=<span class="string">&quot;/api/getSelectData&quot;</span></span><br><span class="line">  placeholder=<span class="string">&quot;è¯·é€‰æ‹©ä¸‹æ‹‰&quot;</span></span><br><span class="line">  allowClear=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">  valueName=&#123;<span class="string">&#x27;valueCode&#x27;</span>&#125;</span><br><span class="line">  labelName=&#123;<span class="string">&#x27;valueName&#x27;</span>&#125;</span><br><span class="line">  params=&#123;&#123; ...params &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h3 id="ç”¨-Render-Props-ï¼ˆå‡½æ•°å­ç»„ä»¶-FaCCï¼‰å®ç°"><a href="#ç”¨-Render-Props-ï¼ˆå‡½æ•°å­ç»„ä»¶-FaCCï¼‰å®ç°" class="headerlink" title="ç”¨ Render Props ï¼ˆå‡½æ•°å­ç»„ä»¶ FaCCï¼‰å®ç°"></a>ç”¨ Render Props ï¼ˆå‡½æ•°å­ç»„ä»¶ FaCCï¼‰å®ç°</h3><p>ç¼–å†™ SelectContext ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SelectContext</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">list</span>: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">children</span>(list);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; params = &#123;&#125;, api = <span class="string">&quot;&quot;</span> &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    axios.<span class="property">http</span></span><br><span class="line">      .<span class="title function_">post</span>(api, &#123;</span><br><span class="line">        ...params</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">it</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (it.<span class="property">resultObject</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">list</span>: it.<span class="property">resultObject</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SelectContext</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ SelectContext ç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Select</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SelectContext</span> <span class="keyword">from</span> <span class="string">&#x27;componentSelect&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">SelectContext</span></span><br><span class="line">  api=<span class="string">&quot;/api/getSelectData&quot;</span></span><br><span class="line">  params=&#123;&#123;...params&#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;<span class="function"><span class="params">list</span> =&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Select</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·é€‰æ‹©&quot;</span> <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;list.map(it =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Select.Option</span> <span class="attr">value</span>=<span class="string">&#123;it.value&#125;</span> <span class="attr">key</span>=<span class="string">&#123;it.value&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;it.name&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Select.Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/<span class="title class_">SelectContext</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>åœ¨ ant.design è¡¨å•ä¸­ç›´æ¥ä½¿ç”¨ Render Props ä¼šå‡ºç°æ— æ³•å–åˆ°å€¼çš„æƒ…å†µï¼Œéœ€è¦æ”¹æˆå¦‚ä¸‹å†™æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">SelectContext</span> api=<span class="string">&quot;/api/getSelectData&quot;</span> params=&#123;&#123; ...params &#125;&#125;&gt;</span><br><span class="line">  &#123;<span class="function"><span class="params">list</span> =&gt;</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;getFieldDecorator(&quot;value&quot;, &#123;&#125;)(</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Select</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·é€‰æ‹©&quot;</span> <span class="attr">allowClear</span>=<span class="string">&#123;true&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;list.map(it =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Select.Option</span> <span class="attr">value</span>=<span class="string">&#123;it.value&#125;</span> <span class="attr">key</span>=<span class="string">&#123;it.value&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;it.name&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Select.Option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Form.Item</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&lt;/<span class="title class_">SelectContext</span>&gt;;</span><br></pre></td></tr></table></figure><p>ç›®å‰æš‚æ—¶ä¸çŸ¥é“ä¸ºä½•ä¼šè¿™æ ·ï¼Œæˆ‘çŒœåº”è¯¥è·Ÿ ant.design çš„å†™æ³•æœ‰å…³ç³»</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å‰æ&quot;&gt;&lt;a href=&quot;#å‰æ&quot; class=&quot;headerlink&quot; title=&quot;å‰æ&quot;&gt;&lt;/a&gt;å‰æ&lt;/h3&gt;&lt;p&gt;æœ€è¿‘å‘ç°è‡ªå·±ä¸€ç›´åœ¨å†™å¾ˆå¤šé‡å¤æ€§çš„ä»£ç ï¼Œæ¯”ä¾‹å…¬å¸çš„æŸä¸ªé¡¹ç›®çš„æœç´¢æ æœ‰å¾ˆå¤šçš„ä¸‹æ‹‰é€‰æ‹©å™¨,è€Œæˆ‘çš„åšæ³•æ˜¯ä¸åœçš„åˆå§‹åŒ–storeã€é…ç½®apiã€å¼•å…¥selectç»„ä»¶ã€é…ç½®selectç»„ä»¶ï¼Œè¿™è¿˜åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¸‹æ‹‰é€‰æ‹©å™¨ï¼Œå¦‚æœæœ‰å¤šä¸ªå°±è§‰å¾—è¿™ä¹ˆå†™æ˜¯ä¸æ˜¯å¾ˆå‚»ï¼Œæ‰€ä»¥æœ€è¿‘ä¸€ç›´åœ¨è€ƒè™‘å¦‚æœä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å½“é‡å¤æ€§çš„å·¥ä½œè¿‡å¤šçš„æ—¶å€™ï¼Œå°±åº”è¯¥è€ƒè™‘è‡ªå·±çš„ä»£ç å†™çš„æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°è£…ï¼šæŠŠå®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ï¼Œéšè—å±æ€§å’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆæ­¥æƒ³æ³•æ˜¯å‡å°‘é‡å¤æ€§çš„å·¥ä½œï¼Œè€Œç›®å‰æˆ‘èƒ½æƒ³åˆ°çš„è§£æ³•æ–¹æ³•æœ‰å‡ ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨ class æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶ï¼ˆè¿™ç§æœ€ç®€å•ä¹Ÿæœ€å®ç”¨ï¼‰&lt;/li&gt;
&lt;li&gt;ç”¨ HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶&lt;/li&gt;
&lt;li&gt;ç”¨ Render Props ï¼ˆå‡½æ•°å­ç»„ä»¶ FaCCï¼‰æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„ç»„ä»¶&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="React" scheme="http://zhen-ke.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>React Router v4 Auth ä¾‹å­è§£è¯»</title>
    <link href="http://zhen-ke.github.io/2018/10/26/react-router-v4-examples-auth/"/>
    <id>http://zhen-ke.github.io/2018/10/26/react-router-v4-examples-auth/</id>
    <published>2018-10-26T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  BrowserRouter as Router,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Redirect,</span><br><span class="line">  withRouter</span><br><span class="line">&#125; from &quot;react-router-dom&quot;;</span><br><span class="line"></span><br><span class="line">////////////////////////////////////////////////////////////</span><br><span class="line">// 1. Click the public page</span><br><span class="line">// 2. Click the protected page</span><br><span class="line">// 3. Log in</span><br><span class="line">// 4. Click the back button, note the URL each time</span><br><span class="line"></span><br><span class="line">function AuthExample() &#123;</span><br><span class="line">  return (</span><br><span class="line">    <span class="tag">&lt;<span class="name">Router</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AuthButton</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/public&quot;</span>&gt;</span>Public Page<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/protected&quot;</span>&gt;</span>Protected Page<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/public&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Public&#125;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Login&#125;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">PrivateRoute</span> <span class="attr">path</span>=<span class="string">&quot;/protected&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Protected&#125;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¿å­˜ç€æ˜¯å¦ç™»å½•çŠ¶æ€</span><br><span class="line">const fakeAuth = &#123;</span><br><span class="line">  isAuthenticated: false,</span><br><span class="line">  authenticate(cb) &#123;</span><br><span class="line">    this.isAuthenticated = true;</span><br><span class="line">    setTimeout(cb, 100); // fake async</span><br><span class="line">  &#125;,</span><br><span class="line">  signout(cb) &#123;</span><br><span class="line">    this.isAuthenticated = false;</span><br><span class="line">    setTimeout(cb, 100);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// é¦–å…ˆæ ¹æ®æŸä¸ªçŠ¶æ€åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•ï¼Œå¦‚æœç™»å½•äº†å°±æ˜¾ç¤ºç™»å‡ºæŒ‰é’®ï¼Œå¦åˆ™å°±æ˜¾ç¤ºç”¨æˆ·æ²¡æœ‰ç™»å½•</span><br><span class="line">const AuthButton = withRouter((&#123; history &#125;) =&gt;</span><br><span class="line">  fakeAuth.isAuthenticated ? (</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      Welcome!&#123;&quot; &quot;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; fakeAuth.signout(() =&gt; history.push(&quot;/&quot;)); &#125;&#125;&gt;ç™»å‡º<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  ) : (</span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½ æ²¡æœ‰ç™»å½•.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// æ‹¿åˆ°ä¼ ç»™ PrivateRoute çš„ Protected ç»„ä»¶ å’Œ Protected å±æ€§ï¼Œç„¶åæŠŠä¼ è¿›æ¥çš„å±æ€§å’Œç»„ä»¶ä¼ ç»™Routeç»„ä»¶ï¼ŒRouteç»„ä»¶è¿”å›å‰è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå·²ç»ç™»å½•è€Œè¿”å›åŸç»„ä»¶ï¼Œåˆ™å¦åˆ™ç”Ÿå®šå‘åˆ°loginé¡µé¢</span><br><span class="line">function PrivateRoute(&#123; component: Protected, ...rest &#125;) &#123;</span><br><span class="line">  return (</span><br><span class="line">    <span class="tag">&lt;<span class="name">Route</span> &#123;<span class="attr">...rest</span>&#125; <span class="attr">render</span>=<span class="string">&#123;props</span> =&gt;</span></span><br><span class="line">      (fakeAuth.isAuthenticated ? (</span><br><span class="line">        <span class="tag">&lt;<span class="name">Protected</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span><br><span class="line">      ) : (</span><br><span class="line">          <span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">to</span>=<span class="string">&#123;&#123;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">pathname:</span> &quot;/<span class="attr">login</span>&quot;,</span></span><br><span class="line"><span class="tag">            <span class="attr">state:</span> &#123; <span class="attr">from:</span> <span class="attr">props.location</span> &#125;</span></span><br><span class="line"><span class="tag">          &#125;&#125; /&gt;</span></span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">    &#125; /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Public ç»„ä»¶</span><br><span class="line">function Public() &#123;</span><br><span class="line">  return <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å…¬å¼€çš„<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Protected ç»„ä»¶</span><br><span class="line">function Protected() &#123;</span><br><span class="line">  return <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å—ä¿æŠ¤çš„<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç™»å½•ç»„ä»¶</span><br><span class="line">class Login extends React.Component &#123;</span><br><span class="line">  state = &#123; redirectToReferrer: false &#125;;</span><br><span class="line"></span><br><span class="line">  // æ›´æ”¹ fakeAuth é‡Œçš„çŠ¶æ€ï¼Œå³ç™»å½•</span><br><span class="line">  login = () =&gt; &#123;</span><br><span class="line">    fakeAuth.authenticate(() =&gt; &#123;</span><br><span class="line">      this.setState(&#123; redirectToReferrer: true &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    debugger</span><br><span class="line">    let &#123; from &#125; = this.props.location.state || &#123; from: &#123; pathname: &quot;/&quot; &#125; &#125;;</span><br><span class="line">    let &#123; redirectToReferrer &#125; = this.state;</span><br><span class="line">    // å¦‚æœç”¨æˆ·å·²ç»ç™»å½•åˆ™é‡å®šå‘åˆ°ä¹‹å‰çš„é¡µé¢</span><br><span class="line">    if (redirectToReferrer) return <span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">to</span>=<span class="string">&#123;from&#125;</span> /&gt;</span>;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ‚¨å¿…é¡»ç™»å½•æ‰èƒ½æŸ¥çœ‹è¯¥é¡µé¢ &#123;from.pathname&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.login&#125;</span>&gt;</span>ç™»å…¥<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default AuthExample;</span><br></pre></td></tr></table></figure><span id="more"></span>]]></content>
    
    
    <summary type="html">&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import React from &amp;quot;react&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  BrowserRouter as Router,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Route,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Link,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Redirect,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  withRouter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; from &amp;quot;react-router-dom&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;////////////////////////////////////////////////////////////&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 1. Click the public page&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 2. Click the protected page&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 3. Log in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 4. Click the back button, note the URL each time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function AuthExample() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Router&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;AuthButton&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Link&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;to&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;/public&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Public Page&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;Link&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Link&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;to&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;/protected&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Protected Page&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;Link&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;li&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;ul&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;path&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;/public&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;component&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;Public&amp;#125;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;path&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;/login&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;component&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;Login&amp;#125;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;PrivateRoute&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;path&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;/protected&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;component&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;Protected&amp;#125;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;Router&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ä¿å­˜ç€æ˜¯å¦ç™»å½•çŠ¶æ€&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const fakeAuth = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  isAuthenticated: false,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  authenticate(cb) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.isAuthenticated = true;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    setTimeout(cb, 100); // fake async&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  signout(cb) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.isAuthenticated = false;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    setTimeout(cb, 100);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// é¦–å…ˆæ ¹æ®æŸä¸ªçŠ¶æ€åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰ç™»å½•ï¼Œå¦‚æœç™»å½•äº†å°±æ˜¾ç¤ºç™»å‡ºæŒ‰é’®ï¼Œå¦åˆ™å°±æ˜¾ç¤ºç”¨æˆ·æ²¡æœ‰ç™»å½•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const AuthButton = withRouter((&amp;#123; history &amp;#125;) =&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fakeAuth.isAuthenticated ? (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Welcome!&amp;#123;&amp;quot; &amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;onClick&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123; fakeAuth.signout(() =&amp;gt; history.push(&amp;quot;/&amp;quot;)); &amp;#125;&amp;#125;&amp;gt;ç™»å‡º&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ) : (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;ä½ æ²¡æœ‰ç™»å½•.&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// æ‹¿åˆ°ä¼ ç»™ PrivateRoute çš„ Protected ç»„ä»¶ å’Œ Protected å±æ€§ï¼Œç„¶åæŠŠä¼ è¿›æ¥çš„å±æ€§å’Œç»„ä»¶ä¼ ç»™Routeç»„ä»¶ï¼ŒRouteç»„ä»¶è¿”å›å‰è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå·²ç»ç™»å½•è€Œè¿”å›åŸç»„ä»¶ï¼Œåˆ™å¦åˆ™ç”Ÿå®šå‘åˆ°loginé¡µé¢&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function PrivateRoute(&amp;#123; component: Protected, ...rest &amp;#125;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Route&lt;/span&gt; &amp;#123;&lt;span class=&quot;attr&quot;&gt;...rest&lt;/span&gt;&amp;#125; &lt;span class=&quot;attr&quot;&gt;render&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;props&lt;/span&gt; =&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      (fakeAuth.isAuthenticated ? (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Protected&lt;/span&gt; &amp;#123;&lt;span class=&quot;attr&quot;&gt;...props&lt;/span&gt;&amp;#125; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ) : (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Redirect&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;to&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;pathname:&lt;/span&gt; &amp;quot;/&lt;span class=&quot;attr&quot;&gt;login&lt;/span&gt;&amp;quot;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;state:&lt;/span&gt; &amp;#123; &lt;span class=&quot;attr&quot;&gt;from:&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;props.location&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;          &amp;#125;&amp;#125; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Public ç»„ä»¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function Public() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;å…¬å¼€çš„&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// Protected ç»„ä»¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;function Protected() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;å—ä¿æŠ¤çš„&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;h3&lt;/span&gt;&amp;gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// ç™»å½•ç»„ä»¶&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class Login extends React.Component &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  state = &amp;#123; redirectToReferrer: false &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // æ›´æ”¹ fakeAuth é‡Œçš„çŠ¶æ€ï¼Œå³ç™»å½•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  login = () =&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fakeAuth.authenticate(() =&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      this.setState(&amp;#123; redirectToReferrer: true &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  render() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    debugger&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let &amp;#123; from &amp;#125; = this.props.location.state || &amp;#123; from: &amp;#123; pathname: &amp;quot;/&amp;quot; &amp;#125; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let &amp;#123; redirectToReferrer &amp;#125; = this.state;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // å¦‚æœç”¨æˆ·å·²ç»ç™»å½•åˆ™é‡å®šå‘åˆ°ä¹‹å‰çš„é¡µé¢&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (redirectToReferrer) return &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;Redirect&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;to&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;from&amp;#125;&lt;/span&gt; /&amp;gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;æ‚¨å¿…é¡»ç™»å½•æ‰èƒ½æŸ¥çœ‹è¯¥é¡µé¢ &amp;#123;from.pathname&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;onClick&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;#123;this.login&amp;#125;&lt;/span&gt;&amp;gt;&lt;/span&gt;ç™»å…¥&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export default AuthExample;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="React Router" scheme="http://zhen-ke.github.io/tags/React-Router/"/>
    
  </entry>
  
  <entry>
    <title>Vue åŠ¨æ€ç»„ä»¶</title>
    <link href="http://zhen-ke.github.io/2018/04/18/vue-component-learn/"/>
    <id>http://zhen-ke.github.io/2018/04/18/vue-component-learn/</id>
    <published>2018-04-18T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.620Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è¯»åˆ°ä¸€ç¯‡å…³äºVueå®ç°å†…éƒ¨ç»„ä»¶è½®æ’­åˆ‡æ¢æ•ˆæœæ–‡ç« ï¼Œå‘ç°éå¸¸æœ‰æ„æ€ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹å®ç°çš„æ–¹æ³•</p><h2 id="åŸæ–‡ç« åœ°å€"><a href="#åŸæ–‡ç« åœ°å€" class="headerlink" title="åŸæ–‡ç« åœ°å€"></a>åŸæ–‡ç« åœ°å€</h2><blockquote><p><a class="link"   href="https://fed.renren.com/2018/04/06/vue-component-slider/" >Vueå®ç°å†…éƒ¨ç»„ä»¶è½®æ’­åˆ‡æ¢æ•ˆæœ<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><blockquote><p>é€šè¿‡<code>&lt;component&gt;</code>å…ƒç´ æ¸²æŸ“ä¸€ä¸ªâ€œå…ƒç»„ä»¶â€ä¸ºåŠ¨æ€ç»„ä»¶ã€‚ä¾ is çš„å€¼ï¼Œæ¥å†³å®šå“ªä¸ªç»„ä»¶è¢«æ¸²æŸ“ã€‚ </p></blockquote><span id="more"></span><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>é‡ç‚¹åœ¨componentå…ƒç´ è¿™æ®µä»£ç ï¼Œé€šè¿‡å®ƒçš„iså€¼ï¼ŒåŠ¨æ€åœ°åŠ è½½ç»„ä»¶å®ç°åˆ‡æ¢ã€‚åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ï¼Œç»™<code>questions</code>è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œç„¶ååœ¨ç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™æ”¹å˜å½“å‰çš„<code>currentIndex</code>çš„å€¼ï¼ŒåŠ¨æ€è¯»å–<code>questions</code>çš„<code>type</code>å±æ€§å³å¯å®ç°åŠ¨æ€ç»„ä»¶åŠ è½½ã€‚</p><p><code>app.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;task-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- é‡ç‚¹åœ¨ä¸‹é¢è¿™æ®µä»£ç ï¼Œé€šè¿‡componentçš„iså€¼ï¼ŒåŠ¨æ€åœ°åŠ è½½ç»„ä»¶å®ç°åˆ‡æ¢ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;&#x27;task-&#x27; + questions[currentIndex].type&quot;</span> <span class="attr">:question</span>=<span class="string">&quot;questions[currentIndex]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;next-question&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;nextQuestion&quot;</span>&gt;</span>ä¸‹ä¸€é¢˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Task1</span> <span class="keyword">from</span> <span class="string">&quot;./components/task-1&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Task2</span> <span class="keyword">from</span> <span class="string">&quot;./components/task-2&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Task3</span> <span class="keyword">from</span> <span class="string">&quot;./components/task-3&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;App&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">currentIndex</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">questions</span>: []</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">nextQuestion</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">currentIndex</span> = (<span class="variable language_">this</span>.<span class="property">currentIndex</span> + <span class="number">1</span>) % <span class="variable language_">this</span>.<span class="property">questions</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="property">questions</span> = [</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">index</span>: <span class="number">1</span>, <span class="attr">type</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&quot;è¿™é‡Œæ˜¯ Task1 ç»„ä»¶&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">index</span>: <span class="number">2</span>, <span class="attr">type</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&quot;è¿™é‡Œæ˜¯ Task2 ç»„ä»¶&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">index</span>: <span class="number">3</span>, <span class="attr">type</span>: <span class="number">3</span>, <span class="attr">content</span>: <span class="string">&quot;è¿™é‡Œæ˜¯ Task3 ç»„ä»¶&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Task1</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Task2</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Task3</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>task-1.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;question.index&#125;&#125;. é€‰æ‹©é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;question.content&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&quot;question&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>task-2.vueã€task-3.vue</code> åŒä¸Š</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘è¯»åˆ°ä¸€ç¯‡å…³äºVueå®ç°å†…éƒ¨ç»„ä»¶è½®æ’­åˆ‡æ¢æ•ˆæœæ–‡ç« ï¼Œå‘ç°éå¸¸æœ‰æ„æ€ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹å®ç°çš„æ–¹æ³•&lt;/p&gt;
&lt;h2 id=&quot;åŸæ–‡ç« åœ°å€&quot;&gt;&lt;a href=&quot;#åŸæ–‡ç« åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;åŸæ–‡ç« åœ°å€&quot;&gt;&lt;/a&gt;åŸæ–‡ç« åœ°å€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;a class=&quot;link&quot;   href=&quot;https://fed.renren.com/2018/04/06/vue-component-slider/&quot; &gt;Vueå®ç°å†…éƒ¨ç»„ä»¶è½®æ’­åˆ‡æ¢æ•ˆæœ&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;åŸç†&quot;&gt;&lt;a href=&quot;#åŸç†&quot; class=&quot;headerlink&quot; title=&quot;åŸç†&quot;&gt;&lt;/a&gt;åŸç†&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡&lt;code&gt;&amp;lt;component&amp;gt;&lt;/code&gt;å…ƒç´ æ¸²æŸ“ä¸€ä¸ªâ€œå…ƒç»„ä»¶â€ä¸ºåŠ¨æ€ç»„ä»¶ã€‚ä¾ is çš„å€¼ï¼Œæ¥å†³å®šå“ªä¸ªç»„ä»¶è¢«æ¸²æŸ“ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="vue" scheme="http://zhen-ke.github.io/categories/vue/"/>
    
    
    <category term="vue" scheme="http://zhen-ke.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>synology ä¸Šéƒ¨ç½² Hexo</title>
    <link href="http://zhen-ke.github.io/2018/03/06/synology-hexo/"/>
    <id>http://zhen-ke.github.io/2018/03/06/synology-hexo/</id>
    <published>2018-03-06T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.620Z</updated>
    
    <content type="html"><![CDATA[<p>æç¤ºï¼šæœ¬æ•™ç¨‹ä¼šç›´æ¥è·³è¿‡é…ç½® <code>github pags</code>ä¸ <code>Hexo</code> </p><h3 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h3><ul><li>åœ¨å¥—ä»¶ä¸­å¿ƒå®‰è£… â€œGit Serverâ€ å’Œ â€Node.js v4â€</li><li>åœ¨ home ç›®å½•ï¼ˆå…¶å®ƒç›®å½•ä¹Ÿå¯ä»¥ï¼‰å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥ä¿å­˜ä½ çš„ blog</li><li>åœ¨ç»ˆç«¯ï¼ˆæˆ–è€…å…¶å®ƒSSHçš„å·¥å…·ï¼‰ä¸‹è¿æ¥ä½ çš„ Synology</li></ul><h3 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h3><p>å¦‚æœä½ æœ¬åœ°å·²ç»åˆå§‹è¿‡å·²ç»å®‰è£…è¿‡ Hexo å¹¶å…·å®‰è£…è¿‡å¿…é¡»çš„ä¾èµ–ï¼Œåˆ™åªéœ€è¦æŠŠæœ¬åœ°çš„æ–‡ä»¶ä¸¢åˆ°<code>/home/blog</code>ç›®å½•å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog //æ‰¾åˆ°ä½ æ”¾blogçš„ç›®å½•å³å¯</span><br><span class="line">npm install -g hexo-cli  //å®‰è£…Hexo</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å®‰è£…ï¼Œåˆ™éœ€è¦è¿›è¡Œä»¥ä¸‹æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install -g hexo-cli  //å®‰è£…Hexo</span><br><span class="line">hexo -v  //æŸ¥çœ‹Hexoçš„å®‰è£…æ˜¯å¦æ­£å¸¸</span><br><span class="line">hexo init  //åˆå§‹åŒ–Hexo</span><br><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">npm install  //å®‰è£…ä¾èµ–åŒ…</span><br><span class="line">npm install hexo-deployer-git --save  //å®‰è£…æ’ä»¶</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-Hexo"><a href="#å¯åŠ¨-Hexo" class="headerlink" title="å¯åŠ¨ Hexo"></a>å¯åŠ¨ Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hexo s // å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²åˆ°-Github"><a href="#éƒ¨ç½²åˆ°-Github" class="headerlink" title="éƒ¨ç½²åˆ° Github"></a>éƒ¨ç½²åˆ° Github</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo clean // æ¸…é™¤æœ¬åœ°ç¼“å­˜</span><br><span class="line"></span><br><span class="line">hexo generator // åˆå§‹åŒ–æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">hexo deploy // æäº¤æ–‡ä»¶åˆ°æœåŠ¡å™¨</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æç¤ºï¼šæœ¬æ•™ç¨‹ä¼šç›´æ¥è·³è¿‡é…ç½® &lt;code&gt;github pags&lt;/code&gt;ä¸ &lt;code&gt;Hexo&lt;/code&gt; &lt;/p&gt;
&lt;h3 id=&quot;é…ç½®ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#é…ç½®ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®ç¯å¢ƒ&quot;&gt;&lt;/a&gt;é…ç½®ç¯å¢ƒ&lt;/h3</summary>
      
    
    
    
    <category term="NAS" scheme="http://zhen-ke.github.io/categories/NAS/"/>
    
    
    <category term="NAS" scheme="http://zhen-ke.github.io/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>node ç‰ˆæœ¬ç®¡ç†å·¥å…· nvm</title>
    <link href="http://zhen-ke.github.io/2018/03/05/node-version-control-nvm/"/>
    <id>http://zhen-ke.github.io/2018/03/05/node-version-control-nvm/</id>
    <published>2018-03-05T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nvm-å®‰è£…"><a href="#nvm-å®‰è£…" class="headerlink" title="nvm å®‰è£…"></a>nvm å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-node"><a href="#å®‰è£…-node" class="headerlink" title="å®‰è£… node"></a>å®‰è£… node</h2><h3 id="å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„-node"><a href="#å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„-node" class="headerlink" title="å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node"></a>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install v5.5.0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬"><a href="#å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬" class="headerlink" title="å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬"></a>å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 6</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="åˆ—å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„å¯ç”¨ç‰ˆæœ¬"><a href="#åˆ—å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„å¯ç”¨ç‰ˆæœ¬" class="headerlink" title="åˆ—å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„å¯ç”¨ç‰ˆæœ¬"></a>åˆ—å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„å¯ç”¨ç‰ˆæœ¬</h3><p>mac</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote</span><br></pre></td></tr></table></figure><p>Windows</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">ls</span> available</span><br></pre></td></tr></table></figure><h3 id="ç‰ˆæœ¬åˆ‡æ¢"><a href="#ç‰ˆæœ¬åˆ‡æ¢" class="headerlink" title="ç‰ˆæœ¬åˆ‡æ¢"></a>ç‰ˆæœ¬åˆ‡æ¢</h3><h3 id="åˆ‡æ¢æŒ‡å®šç‰ˆæœ¬"><a href="#åˆ‡æ¢æŒ‡å®šç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢æŒ‡å®šç‰ˆæœ¬"></a>åˆ‡æ¢æŒ‡å®šç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 4.2.2</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use system</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬çš„æœ€æ–°ç‰ˆ"><a href="#åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬çš„æœ€æ–°ç‰ˆ" class="headerlink" title="åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬çš„æœ€æ–°ç‰ˆ"></a>åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬çš„æœ€æ–°ç‰ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 4.2</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆ"><a href="#åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆ" class="headerlink" title="åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆ"></a>åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use node</span><br></pre></td></tr></table></figure><h3 id="åˆ—å‡ºå·²å®‰è£…å®ä¾‹"><a href="#åˆ—å‡ºå·²å®‰è£…å®ä¾‹" class="headerlink" title="åˆ—å‡ºå·²å®‰è£…å®ä¾‹"></a>åˆ—å‡ºå·²å®‰è£…å®ä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œç‰¹å®šç‰ˆæœ¬çš„-Node"><a href="#è¿è¡Œç‰¹å®šç‰ˆæœ¬çš„-Node" class="headerlink" title="è¿è¡Œç‰¹å®šç‰ˆæœ¬çš„ Node"></a>è¿è¡Œç‰¹å®šç‰ˆæœ¬çš„ Node</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm run 4.2.2 --version</span><br></pre></td></tr></table></figure><h3 id="ç¡®è®¤æŸä¸ªç‰ˆæœ¬Nodeçš„è·¯å¾„"><a href="#ç¡®è®¤æŸä¸ªç‰ˆæœ¬Nodeçš„è·¯å¾„" class="headerlink" title="ç¡®è®¤æŸä¸ªç‰ˆæœ¬Nodeçš„è·¯å¾„"></a>ç¡®è®¤æŸä¸ªç‰ˆæœ¬Nodeçš„è·¯å¾„</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">which</span> 4.2.2</span><br></pre></td></tr></table></figure><h3 id="è®¾å®šé»˜è®¤çš„nodeç‰ˆæœ¬-nvm-alias-default"><a href="#è®¾å®šé»˜è®¤çš„nodeç‰ˆæœ¬-nvm-alias-default" class="headerlink" title="è®¾å®šé»˜è®¤çš„nodeç‰ˆæœ¬ nvm alias default &lt;ç‰ˆæœ¬å·&gt;"></a>è®¾å®šé»˜è®¤çš„nodeç‰ˆæœ¬ nvm alias default &lt;ç‰ˆæœ¬å·&gt;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default v6.6.0</span><br></pre></td></tr></table></figure><h3 id="å¸è½½-nvm-uninstall"><a href="#å¸è½½-nvm-uninstall" class="headerlink" title="å¸è½½ nvm uninstall &lt;nodeç‰ˆæœ¬å·&gt;"></a>å¸è½½ nvm uninstall &lt;nodeç‰ˆæœ¬å·&gt;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ nvm uninstall v6.6.0</span><br><span class="line">file is not writable or self-owned: <span class="variable">$NVM_DIR</span>/versions/node/v6.6.0/bin/cnpm</span><br><span class="line">Cannot uninstall, incorrect permissions on installation folder.</span><br><span class="line">This is usually caused by running `npm install -g` as root. Run the following commands as root to fix the permissions and <span class="keyword">then</span> try again.</span><br><span class="line"></span><br><span class="line">  <span class="built_in">chown</span> -R username <span class="string">&quot;<span class="variable">$NVM_DIR</span>/versions/node/v6.6.0&quot;</span></span><br><span class="line">  <span class="built_in">chmod</span> -R u+w <span class="string">&quot;<span class="variable">$NVM_DIR</span>/versions/node/v6.6.0&quot;</span></span><br></pre></td></tr></table></figure><p>ç¬¬1è¡Œï¼šæŠŠæŒ‡å®šç›®å½•çš„æ‰€æœ‰è€…æ”¹ä¸º username æ‰€æœ‰ï¼Œè¿™é‡Œ username æ˜¯ç”¨æˆ·åï¼Œå¯ä»¥æ”¹æˆ  $(whoami) é¿å…è¾“å…¥é”™è¯¯ã€‚æ‰€ä»¥å…ˆè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆä½¿ç”¨sudoï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> -R $(<span class="built_in">whoami</span>) <span class="string">&quot;<span class="variable">$NVM_DIR</span>/versions/node/v6.6.0&quot;</span></span><br></pre></td></tr></table></figure><p>ç¬¬2è¡Œï¼šu+wä¸­uè¡¨ç¤ºæ‰€æœ‰è€…ï¼Œ+è¡¨ç¤ºå¢åŠ æƒé™ï¼Œwè¡¨ç¤ºå¯å†™å…¥ã€‚æ•´å¥è¡¨ç¤ºå¯¹ç›®å½•æ‰€æœ‰è€…å¢åŠ å†™å…¥æƒé™ã€‚æ‰€ä»¥å†è¾“å…¥ï¼ˆä½¿ç”¨sudoï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R u+w <span class="string">&quot;<span class="variable">$NVM_DIR</span>/versions/node/v6.6.0&quot;</span></span><br></pre></td></tr></table></figure><p>å½“ç”¨æˆ·æœ‰äº†æƒé™ä¹‹åï¼Œå°±å¯ä»¥åˆ é™¤æŒ‡å®šç‰ˆæœ¬çš„ node</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;nvm-å®‰è£…&quot;&gt;&lt;a href=&quot;#nvm-å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;nvm å®‰è£…&quot;&gt;&lt;/a&gt;nvm å®‰è£…&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;å®‰è£…-node&quot;&gt;&lt;a href=&quot;#å®‰è£…-node&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… node&quot;&gt;&lt;/a&gt;å®‰è£… node&lt;/h2&gt;&lt;h3 id=&quot;å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„-node&quot;&gt;&lt;a href=&quot;#å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„-node&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node&quot;&gt;&lt;/a&gt;å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nvm install v5.5.0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬&quot;&gt;&lt;a href=&quot;#å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬&quot;&gt;&lt;/a&gt;å®‰è£…ä¸€ä¸ªç³»åˆ—ä¸­æœ€æ–°çš„ç‰ˆæœ¬&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nvm install 6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>setTimeoutä¼ å‚æ•°</title>
    <link href="http://zhen-ke.github.io/2017/12/28/settimeout-add-params/"/>
    <id>http://zhen-ke.github.io/2017/12/28/settimeout-add-params/</id>
    <published>2017-12-28T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<p>é™¤äº†å‰ä¸¤ä¸ªå‚æ•°ï¼ŒsetTimeoutè¿˜å…è®¸æ·»åŠ æ›´å¤šçš„å‚æ•°ã€‚å®ƒä»¬å°†è¢«ä¼ å…¥æ¨è¿Ÿæ‰§è¡Œçš„å‡½æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a+b);</span><br><span class="line">&#125;,<span class="number">1000</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨bindæ–¹æ³•ï¼ŒæŠŠå¤šä½™çš„å‚æ•°ç»‘å®šåœ¨å›è°ƒå‡½æ•°ä¸Šé¢ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°è¾“å…¥setTimeout</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">b</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">  &#125;.<span class="title function_">bind</span>(<span class="literal">null</span>,b),<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é—­åŒ…</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">arg</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="title function_">a</span>(<span class="number">2</span>),<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é™¤äº†å‰ä¸¤ä¸ªå‚æ•°ï¼ŒsetTimeoutè¿˜å…è®¸æ·»åŠ æ›´å¤šçš„å‚æ•°ã€‚å®ƒä»¬å°†è¢«ä¼ å…¥æ¨è¿Ÿæ‰§è¡Œçš„å‡½æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;</summary>
      
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>jQueryæ·»åŠ è‡ªå®šä¹‰å‡½æ•°çš„ä¸¤ç§æ–¹æ³•</title>
    <link href="http://zhen-ke.github.io/2017/12/02/jquery-extend/"/>
    <id>http://zhen-ke.github.io/2017/12/02/jquery-extend/</id>
    <published>2017-12-02T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ æ’ä»¶æ–¹æ³•ï¼Œ$(&quot;&quot;). é€‰ä¸­å…ƒç´ åç›´æ¥æ“ä½œ</span></span><br><span class="line">$.fn.<span class="property">functionName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery åº”ç”¨æ‰©å±•ï¼Œåœ¨å‘½åç©ºé—´ä¸ŠåŠ æ–¹æ³•ï¼Œç›´æ¥ $. æ“ä½œ</span></span><br><span class="line">jQuery.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">functionName</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td</summary>
      
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Vue é€šä¿¡</title>
    <link href="http://zhen-ke.github.io/2017/11/20/vue-communication/"/>
    <id>http://zhen-ke.github.io/2017/11/20/vue-communication/</id>
    <published>2017-11-20T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.620Z</updated>
    
    <content type="html"><![CDATA[<h2 id="çˆ¶å­é€šä¿¡"><a href="#çˆ¶å­é€šä¿¡" class="headerlink" title="çˆ¶å­é€šä¿¡"></a>çˆ¶å­é€šä¿¡</h2><h3 id="çˆ¶ç»„ä»¶ä½¿ç”¨-prop-ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶ä½¿ç”¨-prop-ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶ä½¿ç”¨ prop ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶"></a>çˆ¶ç»„ä»¶ä½¿ç”¨ prop ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶</h3><p>åœ¨çˆ¶ç»„ä»¶ father.vue ä¸­å¼•ç”¨å­ç»„ä»¶ child.vueï¼ŒæŠŠ name çš„å€¼ä¼ ç»™ child ç»„ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    // message å®šä¹‰åœ¨å­ç»„ä»¶çš„ props ä¸­</span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">:message</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&#x27;./child.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    child</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;linxin&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>åœ¨å­ç»„ä»¶ child.vue ä¸­çš„ props é€‰é¡¹ä¸­å£°æ˜å®ƒæœŸå¾…è·å¾—çš„æ•°æ®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello &#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// åœ¨ props ä¸­å£°æ˜è·å–çˆ¶ç»„ä»¶çš„æ•°æ®é€šè¿‡ message ä¼ è¿‡æ¥</span></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;message&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å­ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è·Ÿçˆ¶ç»„ä»¶é€šä¿¡"><a href="#å­ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è·Ÿçˆ¶ç»„ä»¶é€šä¿¡" class="headerlink" title="å­ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è·Ÿçˆ¶ç»„ä»¶é€šä¿¡"></a>å­ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è·Ÿçˆ¶ç»„ä»¶é€šä¿¡</h3><p>çˆ¶ç»„ä»¶ father.vue åœ¨å­ç»„ä»¶ä¸Šç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; total &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> @<span class="attr">increment</span>=<span class="string">&quot;incrementTotal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> child <span class="keyword">from</span> <span class="string">&#x27;./child.vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    child</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">total</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">incrementTotal</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">total</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ child.vue æ´¾å‘ä¸€ä¸ªäº‹ä»¶åç§°ä¸çˆ¶ç»„ä»¶é€šä¿¡</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;incrementCounter&quot;</span>&gt;</span>&#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">counter</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">incrementCounter</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">counter</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;increment&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å…„å¼Ÿé€šä¿¡"><a href="#å…„å¼Ÿé€šä¿¡" class="headerlink" title="å…„å¼Ÿé€šä¿¡"></a>å…„å¼Ÿé€šä¿¡</h2><p>å…¨å±€äº‹ä»¶ä¸­å¿ƒ bus.js æ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">export default new Vue();</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶ father.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">childa</span>&gt;</span><span class="tag">&lt;/<span class="name">childa</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">childb</span>&gt;</span><span class="tag">&lt;/<span class="name">childb</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> childa <span class="keyword">from</span> <span class="string">&#x27;./components/childa&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> childb <span class="keyword">from</span> <span class="string">&#x27;./components/childb&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    childa,</span></span><br><span class="line"><span class="language-javascript">    childb,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ childA.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;../bus&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&quot;ä½ å¥½&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    bus.$on(<span class="string">&#x27;setMsg&#x27;</span>, <span class="function"><span class="params">it</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">msg</span> = it</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ childB.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;sendEvent&#x27;</span>&gt;</span>Say Hi<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;../bus&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">sendEvent</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      bus.$emit(<span class="string">&#x27;setMsg&#x27;</span>, <span class="string">&#x27;hi vue&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><h3 id="åœ¨ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€"><a href="#åœ¨ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€" class="headerlink" title="åœ¨ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€"></a>åœ¨ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€</h3><h4 id="mapStateå‡½æ•°"><a href="#mapStateå‡½æ•°" class="headerlink" title="mapStateå‡½æ•°"></a>mapStateå‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">computed</span>: <span class="title function_">mapState</span>([<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»-store-ä¸­çš„-state-ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€"><a href="#ä»-store-ä¸­çš„-state-ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€" class="headerlink" title="ä» store ä¸­çš„ state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€"></a>ä» store ä¸­çš„ state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€</h3><h4 id="Getterså¯¹è±¡"><a href="#Getterså¯¹è±¡" class="headerlink" title="Getterså¯¹è±¡"></a>Getterså¯¹è±¡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vuex</span></span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">  <span class="attr">doneTodos</span>: <span class="function"><span class="params">state</span> =&gt;</span> &#123; <span class="comment">// å¯¹stateå¯¹è±¡è¿›è¡Œåšå¤„ç†è®¡ç®—</span></span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">todos</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">todo</span> =&gt;</span> todo.<span class="property">done</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="mapGettersè¾…åŠ©å‡½æ•°"><a href="#mapGettersè¾…åŠ©å‡½æ•°" class="headerlink" title="mapGettersè¾…åŠ©å‡½æ•°"></a>mapGettersè¾…åŠ©å‡½æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getters æ··å…¥ computed å¯¹è±¡ä¸­</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([</span><br><span class="line">      <span class="string">&#x27;doneTodosCount&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;anotherGetter&#x27;</span>,</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ”¹-store-ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤-mutation"><a href="#æ›´æ”¹-store-ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤-mutation" class="headerlink" title="æ›´æ”¹ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutation"></a>æ›´æ”¹ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutation</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  Vuex</span></span><br><span class="line"><span class="attr">mutation</span>: &#123;</span><br><span class="line">  increment (state, payload) &#123;</span><br><span class="line">    state.<span class="property">totalPrice</span> += payload.<span class="property">price</span> + payload.<span class="property">count</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼"><a href="#å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼" class="headerlink" title="å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼"></a>å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue</span></span><br><span class="line">store.<span class="title function_">commit</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>,</span><br><span class="line">  <span class="attr">price</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">count</span>: <span class="number">8</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å¸¸é‡æ›¿ä»£-Mutation-äº‹ä»¶ç±»å‹"><a href="#ä½¿ç”¨å¸¸é‡æ›¿ä»£-Mutation-äº‹ä»¶ç±»å‹" class="headerlink" title="ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹"></a>ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutation-types.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">SOME_MUTATION</span> = <span class="string">&#x27;SOME_MUTATION&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span>  <span class="string">&#x27;./mutation-types&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ES2015 é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å</span></span><br><span class="line">    [<span class="variable constant_">SOME_MUTATION</span>] (state,payload) &#123;</span><br><span class="line">      <span class="comment">// mutate state</span></span><br><span class="line">      state.<span class="property">payload</span> = payload</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="mapMutationså‡½æ•°-åœ¨ç»„ä»¶ä¸­æäº¤-Mutations"><a href="#mapMutationså‡½æ•°-åœ¨ç»„ä»¶ä¸­æäº¤-Mutations" class="headerlink" title="mapMutationså‡½æ•° - åœ¨ç»„ä»¶ä¸­æäº¤ Mutations"></a>mapMutationså‡½æ•° - åœ¨ç»„ä»¶ä¸­æäº¤ Mutations</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapMutations</span>([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.commit(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><h4 id="Action-æ˜¯å¼‚æ­¥æäº¤-mutation"><a href="#Action-æ˜¯å¼‚æ­¥æäº¤-mutation" class="headerlink" title="Action æ˜¯å¼‚æ­¥æäº¤ mutation"></a>Action æ˜¯å¼‚æ­¥æäº¤ mutation</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="åˆ†å‘-Action"><a href="#åˆ†å‘-Action" class="headerlink" title="åˆ†å‘ Action"></a>åˆ†å‘ Action</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥è½½è·å½¢å¼åˆ†å‘</span></span><br><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&#x27;incrementAsync&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">amount</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘</span></span><br><span class="line">store.<span class="title function_">dispatch</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;incrementAsync&#x27;</span>,</span><br><span class="line">  <span class="attr">amount</span>: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="mapActions-åœ¨ç»„ä»¶ä¸­åˆ†å‘-Action"><a href="#mapActions-åœ¨ç»„ä»¶ä¸­åˆ†å‘-Action" class="headerlink" title="mapActions - åœ¨ç»„ä»¶ä¸­åˆ†å‘ Action"></a>mapActions - åœ¨ç»„ä»¶ä¸­åˆ†å‘ Action</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapActions</span>([</span><br><span class="line">      <span class="string">&#x27;increment&#x27;</span>, <span class="comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">&#x27;incrementBy&#x27;</span> <span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch(&#x27;incrementBy&#x27;, amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...<span class="title function_">mapActions</span>(&#123;</span><br><span class="line">      <span class="attr">add</span>: <span class="string">&#x27;increment&#x27;</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch(&#x27;increment&#x27;)`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;çˆ¶å­é€šä¿¡&quot;&gt;&lt;a href=&quot;#çˆ¶å­é€šä¿¡&quot; class=&quot;headerlink&quot; title=&quot;çˆ¶å­é€šä¿¡&quot;&gt;&lt;/a&gt;çˆ¶å­é€šä¿¡&lt;/h2&gt;&lt;h3 id=&quot;çˆ¶ç»„ä»¶ä½¿ç”¨-prop-ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶&quot;&gt;&lt;a href=&quot;#çˆ¶ç»„ä»¶ä½¿ç”¨-prop-ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;çˆ¶ç»„ä»¶ä½¿ç”¨ prop ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶&quot;&gt;&lt;/a&gt;çˆ¶ç»„ä»¶ä½¿ç”¨ prop ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶&lt;/h3&gt;&lt;p&gt;åœ¨çˆ¶ç»„ä»¶ father.vue ä¸­å¼•ç”¨å­ç»„ä»¶ child.vueï¼ŒæŠŠ name çš„å€¼ä¼ ç»™ child ç»„ä»¶ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // message å®šä¹‰åœ¨å­ç»„ä»¶çš„ props ä¸­&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;child&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;:message&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;child&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;template&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; child &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;./child.vue&amp;#x27;&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;components&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;    child&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;  &lt;span class=&quot;title function_&quot;&gt;data&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;linxin&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JSONP Promise</title>
    <link href="http://zhen-ke.github.io/2017/08/02/jsonp-promise/"/>
    <id>http://zhen-ke.github.io/2017/08/02/jsonp-promise/</id>
    <published>2017-08-02T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>    <span class="variable">xmit</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@DateTime</span>  2017-08-02</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@copyright</span> [copyright]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@license</span>   [license]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>   [0.1.0]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>     &#123;<span class="type">[type]</span>&#125;    url     [jsonp link]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>     &#123;<span class="type">[type]</span>&#125;    params  [Object]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>     &#123;<span class="type">[type]</span>&#125;    timeout [number]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>    &#123;<span class="type">[type]</span>&#125;            [Promise]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example</span></span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * jsonp(&#x27;https://www.ip.net/json/&#x27;, &#123;units:&#x27;si&#x27;,lang:&#x27;zh&#x27;&#125;, 5000)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">jsonp</span>(<span class="params">url, params, timeout</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> callbackname = <span class="string">&#x27;___JSONP_CALLBACK___&#x27;</span> + <span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>().<span class="title function_">substr</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">let</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.<span class="property">src</span> = url.<span class="title function_">indexOf</span>(<span class="string">&#x27;?&#x27;</span>) &gt; -<span class="number">1</span> ? url + <span class="string">&quot;&amp;&quot;</span> + <span class="title function_">serialize</span>(params) + <span class="string">&#x27;&amp;callback=&#x27;</span> + callbackname : url + <span class="string">&#x27;?&#x27;</span> + <span class="title function_">serialize</span>(params) + <span class="string">&#x27;&amp;callback=&#x27;</span> + callbackname</span><br><span class="line">    <span class="comment">// åŠ è½½æˆåŠŸ</span></span><br><span class="line">    <span class="variable language_">window</span>[callbackname] = <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timerid)</span><br><span class="line">      <span class="title function_">removeScript</span>()</span><br><span class="line">      <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ è½½å¤±è´¥</span></span><br><span class="line">    script.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Script loading error.&#x27;</span>))</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timerid)</span><br><span class="line">      <span class="title function_">removeScript</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ è½½è¶…æ—¶</span></span><br><span class="line">    <span class="keyword">let</span> timerid = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;JSONP request timed out.&#x27;</span>))</span><br><span class="line">      <span class="title function_">removeScript</span>()</span><br><span class="line">    &#125;, timeout)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(script)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤scriptæ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">removeScript</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">delete</span> <span class="variable language_">window</span>[callbackname]</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(script)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åºåˆ—åŒ–</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">serialize</span>(<span class="params">params</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">        result += key + <span class="string">&quot;=&quot;</span> + params[key] + <span class="string">&#x27;&amp;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result.<span class="title function_">slice</span>(<span class="number">0</span>, result.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>äºŒå‰æ ‘å¹¿åº¦ä¼˜å…ˆæœç´¢</title>
    <link href="http://zhen-ke.github.io/2017/07/07/binary-tree-level-order-traversal/"/>
    <id>http://zhen-ke.github.io/2017/07/07/binary-tree-level-order-traversal/</id>
    <published>2017-07-07T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æŠŠæ¯å±‚çš„å€¼çš„æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> breadthTraversal = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = [] <span class="comment">//å®šä¹‰ä¿å­˜å¹¿åº¦éå†ç»“æœçš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">let</span> queue = [root] <span class="comment">//å°†äºŒå‰æ ‘æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">  <span class="keyword">if</span> (root) &#123; <span class="comment">//åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">while</span> (queue.<span class="property">length</span>) &#123; <span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">      <span class="keyword">let</span> node = queue.<span class="title function_">shift</span>() <span class="comment">//ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">      result.<span class="title function_">push</span>(node.<span class="property">value</span>) <span class="comment">//å°†å–å‡ºç»“ç‚¹çš„å€¼ä¿å­˜åˆ°æ•°ç»„</span></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">left</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>) <span class="comment">//å¦‚æœå­˜åœ¨å·¦å­æ ‘ï¼Œå°†å·¦å­æ ‘æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">right</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>) <span class="comment">//å¦‚æœå­˜åœ¨å³å­æ ‘ï¼Œå°†å³å­æ ‘æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">breadthTraversal</span>(tree);</span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>æŠŠæ¯å±‚çš„å€¼çš„æ”¾åˆ°ä¸€ä¸ªäºŒç»´æ•°ç»„é‡Œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> breadthTraversal = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="keyword">if</span> (root) &#123;</span><br><span class="line">    <span class="keyword">var</span> queue = [root];</span><br><span class="line">    <span class="keyword">while</span> (queue.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> temp = []</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = queue.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> node = queue.<span class="title function_">shift</span>()</span><br><span class="line">        temp.<span class="title function_">push</span>(node.<span class="property">value</span>);</span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">left</span>) queue.<span class="title function_">push</span>(node.<span class="property">left</span>);</span><br><span class="line">        <span class="keyword">if</span> (node.<span class="property">right</span>) queue.<span class="title function_">push</span>(node.<span class="property">right</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      result.<span class="title function_">push</span>(temp)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">breadthTraversal</span>(tree);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;æŠŠæ¯å±‚çš„å€¼çš„æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; breadthTraversal = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;root&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; result = [] &lt;span class=&quot;comment&quot;&gt;//å®šä¹‰ä¿å­˜å¹¿åº¦éå†ç»“æœçš„æ•°ç»„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; queue = [root] &lt;span class=&quot;comment&quot;&gt;//å°†äºŒå‰æ ‘æ”¾å…¥é˜Ÿåˆ—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (root) &amp;#123; &lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºç©º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (queue.&lt;span class=&quot;property&quot;&gt;length&lt;/span&gt;) &amp;#123; &lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; node = queue.&lt;span class=&quot;title function_&quot;&gt;shift&lt;/span&gt;() &lt;span class=&quot;comment&quot;&gt;//ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªç»“ç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      result.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;value&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//å°†å–å‡ºç»“ç‚¹çš„å€¼ä¿å­˜åˆ°æ•°ç»„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node.&lt;span class=&quot;property&quot;&gt;left&lt;/span&gt;) queue.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;left&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//å¦‚æœå­˜åœ¨å·¦å­æ ‘ï¼Œå°†å·¦å­æ ‘æ”¾å…¥é˜Ÿåˆ—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node.&lt;span class=&quot;property&quot;&gt;right&lt;/span&gt;) queue.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;right&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//å¦‚æœå­˜åœ¨å³å­æ ‘ï¼Œå°†å³å­æ ‘æ”¾å…¥é˜Ÿåˆ—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;breadthTraversal&lt;/span&gt;(tree);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>é«˜ç²¾åº¦åŠ æ³•</title>
    <link href="http://zhen-ke.github.io/2017/07/02/high-precision-addition/"/>
    <id>http://zhen-ke.github.io/2017/07/02/high-precision-addition/</id>
    <published>2017-07-02T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addStrings = <span class="keyword">function</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  num1 = num1.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">it</span> =&gt;</span> +it) <span class="comment">// å­—ç¬¦ä¸²è½¬æˆæ•°ç»„</span></span><br><span class="line">  num2 = num2.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">it</span> =&gt;</span> +it) <span class="comment">// å­—ç¬¦ä¸²è½¬æˆæ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> len1 = num1.<span class="property">length</span></span><br><span class="line">  <span class="keyword">var</span> len2 = num2.<span class="property">length</span></span><br><span class="line">  <span class="keyword">var</span> len = <span class="number">1</span> + (len1 &gt; len2 ? len1 : len2) <span class="comment">// ç»“æœæ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">  <span class="keyword">var</span> myArray = <span class="keyword">new</span> <span class="title class_">Array</span>(len).<span class="title function_">fill</span>(<span class="number">0</span>) <span class="comment">// å‘ç»“æœæ•°ç»„å¡«å…… 0</span></span><br><span class="line">  <span class="keyword">var</span> i = len1 - <span class="number">1</span>,</span><br><span class="line">    j = len2 - <span class="number">1</span>,</span><br><span class="line">    k = len - <span class="number">1</span></span><br><span class="line">  <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    num1i = num1[i] === <span class="literal">undefined</span> ? <span class="number">0</span> : num1[i] <span class="comment">// ä»»ä½•ä¸€ä¸ªæ•°è¯»ä¸åˆ°å€¼æ—¶ï¼ŒæŠŠå€¼å˜ä¸º0</span></span><br><span class="line">    num2j = num2[j] === <span class="literal">undefined</span> ? <span class="number">0</span> : num2[j] <span class="comment">// ä»»ä½•ä¸€ä¸ªæ•°è¯»ä¸åˆ°å€¼æ—¶ï¼ŒæŠŠå€¼å˜ä¸º0</span></span><br><span class="line">    <span class="keyword">var</span> element = myArray[k] + num1i + num2j</span><br><span class="line">    myArray[k] = element % <span class="number">10</span> <span class="comment">// è®¡ç®—ç»“æœæ•°ç»„çš„ä¸ªä½æ•°</span></span><br><span class="line">    myArray[k - <span class="number">1</span>] = (element - myArray[k]) / <span class="number">10</span> <span class="comment">// è®¡ç®—ç»“æœæ•°ç»„çš„åä½æ•°</span></span><br><span class="line">    k--</span><br><span class="line">    j--</span><br><span class="line">    i--</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (myArray[<span class="number">0</span>] === <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœç»“æœæ•°ç»„æ²¡è¿›ä½å°±åˆ é™¤</span></span><br><span class="line">    myArray.<span class="title function_">shift</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (myArray.<span class="property">length</span> === <span class="number">0</span>) &#123; <span class="comment">// æ•°ç»„çš„é•¿åº¦ä¸ºé›¶å°±è¿”å›0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> myArray.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>) <span class="comment">// æŠŠæ•°ç»„è½¬æˆå­—ç¬¦ä¸²è¿”å›</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="Web Developer" scheme="http://zhen-ke.github.io/categories/Web-Developer/"/>
    
    
    <category term="JavaScript" scheme="http://zhen-ke.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Padavan ç¼–è¯‘æ•™ç¨‹</title>
    <link href="http://zhen-ke.github.io/2016/10/17/padavan-compilation-tutorial/"/>
    <id>http://zhen-ke.github.io/2016/10/17/padavan-compilation-tutorial/</id>
    <published>2016-10-17T00:00:00.000Z</published>
    <updated>2025-08-02T00:29:31.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é…ç½®ç¼–è¯‘ç¯å¢ƒ"><a href="#é…ç½®ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¼–è¯‘ç¯å¢ƒ"></a>é…ç½®ç¼–è¯‘ç¯å¢ƒ</h2><h3 id="å®‰è£…è™šæ‹Ÿæœº"><a href="#å®‰è£…è™šæ‹Ÿæœº" class="headerlink" title="å®‰è£…è™šæ‹Ÿæœº"></a>å®‰è£…è™šæ‹Ÿæœº</h3><h3 id="å®‰è£…Ubuntu-16-04LTS"><a href="#å®‰è£…Ubuntu-16-04LTS" class="headerlink" title="å®‰è£…Ubuntu 16.04LTS"></a>å®‰è£…Ubuntu 16.04LTS</h3><h3 id="å®‰è£…-git"><a href="#å®‰è£…-git" class="headerlink" title="å®‰è£… git"></a>å®‰è£… git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><h3 id="è½¬åˆ°-optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš†-Padavan-ä»“åº“"><a href="#è½¬åˆ°-optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš†-Padavan-ä»“åº“" class="headerlink" title="è½¬åˆ°/optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš† Padavan ä»“åº“"></a>è½¬åˆ°<code>/opt</code>ç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš† Padavan ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line">sudo git <span class="built_in">clone</span> https://bitbucket.org/padavan/rt-n56u.git</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·"><a href="#å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·" class="headerlink" title="å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·"></a>å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install autoconf automake bison build-essential flex gawk gettext gperf libtool pkg-config zlib1g-dev libgmp3-dev libmpc-dev libmpfr-dev texinfo python-docutils mc</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾"><a href="#ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾" class="headerlink" title="ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾"></a>ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u/toolchain-mipsel</span><br><span class="line">sudo ./clean_sources</span><br><span class="line">sudo ./build_toolchain</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘3-0å†…æ ¸çš„å›ºä»¶"><a href="#ç¼–è¯‘3-0å†…æ ¸çš„å›ºä»¶" class="headerlink" title="ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶"></a>ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶</h3><p>å¦‚æœä½ éœ€è¦ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶å°±éœ€è¦æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œé»˜è®¤æ”¯æŒ3.4å†…æ ¸</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u/toolchain-mipsel</span><br><span class="line">sudo ./clean_sources</span><br><span class="line">sudo ./build_toolchain_3.0.x</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¥½åçš„å·¥å…·é“¾ä¼šæ”¾åœ¨<code>/opt/rt-n56u/toolchain-mipsel/toolchain-3.0.x</code></p><p>ä»¥ååœ¨æ›´æ–°æˆ–è€…å‡çº§å·¥å…·é“¾çš„æƒ…å†µä¸‹æ‰éœ€è¦æ‰§è¡Œä»¥ä¸Šæ­¥éª¤ã€‚</p><span id="more"></span><h2 id="æœºå‹é€‚é…ï¼ˆnewifi-miniï¼‰"><a href="#æœºå‹é€‚é…ï¼ˆnewifi-miniï¼‰" class="headerlink" title="æœºå‹é€‚é…ï¼ˆnewifi miniï¼‰"></a>æœºå‹é€‚é…ï¼ˆnewifi miniï¼‰</h2><h3 id="è¿›è¡Œå…¥å›ºä»¶æºç ç›®å½•"><a href="#è¿›è¡Œå…¥å›ºä»¶æºç ç›®å½•" class="headerlink" title="è¿›è¡Œå…¥å›ºä»¶æºç ç›®å½•"></a>è¿›è¡Œå…¥å›ºä»¶æºç ç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u/trunk</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆé…ç½®æ–‡ä»¶"><a href="#ç”Ÿæˆé…ç½®æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé…ç½®æ–‡ä»¶"></a>ç”Ÿæˆé…ç½®æ–‡ä»¶</h3><p>åˆ é™¤é»˜è®¤çš„é…ç½®æ–‡ä»¶ <code>opt/rt-n56u/trunk </code>ä¸‹çš„<code>.config</code>æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯éšè—çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>Ctrl+H</code>æ˜¾ç¤ºä¸éšè—é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œåˆ é™¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -f opt/rt-n56u/trunk/.config </span><br></pre></td></tr></table></figure><p>ä»<code>opt/rt-n56u/trunk/configs/templates</code>é‡Œæ‹·è´å‡º <code>ac54u_base.config </code>åˆ° <code>opt/rt-n56u/trunk</code>ä¸‹å¹¶é‡å‘½åæˆ<code>.config</code>ï¼Œæˆ–è€…ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> opt/rt-n56u/trunk/configs/templates/ac54_base.config /opt/rt-n56u/trunk/.config</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>ç”±äºä¿®æ”¹åé»˜è®¤çš„.config é…ç½®æ–‡ä»¶é‡Œæ–‡æ¡£å†™çš„å¾ˆè¯¦ç»†ï¼Œå°±ä¸å¤šè§£é‡Šï¼Œæ ¹æ®è‡ªå·±éœ€è¦å¼€å¯ä¸å…³é—­éœ€è¦ä¸ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œ<code>#</code>è¿™ä¸ªç¬¦å·é»˜è®¤æ˜¯æ³¨é‡Šä»£ç ï¼Œä¹Ÿå°±æ˜¯å…³é—­æŸä¸ªåŠŸèƒ½ï¼Œåä¹‹å»æ‰å°±æ˜¯å¼€å¯ï¼ˆå¯ä»¥æŠŠæ–‡æ¡£å†…å®¹æ‹·å‡ºæ¥åˆ°ç¿»è¯‘é‡Œç¿»è¯‘ä¸€éï¼Œå¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªåŠŸèƒ½æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼‰</p><h3 id="é€‚é…ç¯ä¸å¤ä½é”®"><a href="#é€‚é…ç¯ä¸å¤ä½é”®" class="headerlink" title="é€‚é…ç¯ä¸å¤ä½é”®"></a>é€‚é…ç¯ä¸å¤ä½é”®</h3><p>ç¼–è¾‘ <code>/opt/rt-56u/trunk/configs/boards/RT-AC54U/board.h</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/* ASUS RT-AC54U */</span><br><span class="line"></span><br><span class="line"><span class="comment">#define BOARD_PID&quot;RT-AC54U&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_NAME&quot;RT-AC54U&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_DESC&quot;ASUS RT-AC54U Wireless Router&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_VENDOR_NAME&quot;ASUSTek Computer Inc.&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_VENDOR_URL&quot;http://www.asus.com/&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_MODEL_URL&quot;http://www.asus.com/Networking/RTAC54U/&quot;</span></span><br><span class="line"><span class="comment">#define BOARD_BOOT_TIME25</span></span><br><span class="line"><span class="comment">#define BOARD_FLASH_TIME120</span></span><br><span class="line"><span class="comment">#undef BOARD_GPIO_BTN_RESET</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_BTN_WPS11</span></span><br><span class="line"><span class="comment">#undef  BOARD_GPIO_BTN_WLTOG</span></span><br><span class="line"><span class="comment">#undef BOARD_GPIO_LED_ALL</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_WIFI72</span></span><br><span class="line"><span class="comment">#undef  BOARD_GPIO_LED_SW2G</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_SW5G50</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_POWER9</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_LAN55</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_WAN51</span></span><br><span class="line"><span class="comment">#define BOARD_GPIO_LED_USB52</span></span><br><span class="line"><span class="comment">#undef  BOARD_GPIO_LED_ROUTER</span></span><br><span class="line"><span class="comment">#undef  BOARD_GPIO_PWR_USB</span></span><br><span class="line"><span class="comment">#define BOARD_HAS_5G_11AC1</span></span><br><span class="line"><span class="comment">#define BOARD_NUM_ANT_5G_TX2</span></span><br><span class="line"><span class="comment">#define BOARD_NUM_ANT_5G_RX2</span></span><br><span class="line"><span class="comment">#define BOARD_NUM_ANT_2G_TX2</span></span><br><span class="line"><span class="comment">#define BOARD_NUM_ANT_2G_RX2</span></span><br><span class="line"><span class="comment">#define BOARD_NUM_ETH_LEDS1</span></span><br><span class="line"><span class="comment">#define BOARD_HAS_EPHY_L10000</span></span><br><span class="line"><span class="comment">#define BOARD_HAS_EPHY_W10000</span></span><br><span class="line"></span><br><span class="line">//ä¸Šé¢æ˜¯newifi miniçš„ï¼Œç”±äºæ¯ä¸ªæœºå‹ä¸åŒï¼Œä»…ä¾›å‚è€ƒ</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨åŸå‚æ— çº¿å‚æ•°"><a href="#è°ƒç”¨åŸå‚æ— çº¿å‚æ•°" class="headerlink" title="è°ƒç”¨åŸå‚æ— çº¿å‚æ•°"></a>è°ƒç”¨åŸå‚æ— çº¿å‚æ•°</h3><p>ç¼–è¾‘ <code>/opt/rt-56u/trunk/configs/boards/RT-AC54U/kernel-3.4.x.config</code>æŸ¥æ‰¾ä¿®æ”¹æˆä»¥ä¸‹ä»£ç ï¼Œå¹¶åˆ é™¤ç›®å½•ä¸‹<code>SingleSKU</code>å¼€å¤´çš„æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CONFIG_RT_SINGLE_SKU=n</span><br><span class="line">CONFIG_RT2860V2_AP_GREENAP=y</span><br><span class="line">CONFIG_INTERNAL_PA_INTERNAL_LNA=n</span><br><span class="line">CONFIG_INTERNAL_PA_EXTERNAL_LNA=n</span><br><span class="line">CONFIG_EXTERNAL_PA_EXTERNAL_LNA=y</span><br><span class="line">CONFIG_MT76X2_AP_GREENAP=y</span><br><span class="line">CONFIG_MT76X2_AP_INTERNAL_PA_INTERNAL_LNA=n</span><br><span class="line">CONFIG_MT76X2_AP_INTERNAL_PA_EXTERNAL_LNA=n</span><br><span class="line">CONFIG_MT76X2_AP_EXTERNAL_PA_EXTERNAL_LNA=y</span><br><span class="line">CONFIG_RALINK_UART_BRATE=57600</span><br></pre></td></tr></table></figure><h3 id="é€‚é…WANå£ä¸LANå£"><a href="#é€‚é…WANå£ä¸LANå£" class="headerlink" title="é€‚é…WANå£ä¸LANå£"></a>é€‚é…WANå£ä¸LANå£</h3><p>ç¼–è¾‘ <code>/opt/rt-56u/trunk/configs/boards/RT-AC54U/kernel-3.4.x.config</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CONFIG_RAETH_ESW_PORT_WAN=4</span><br><span class="line">CONFIG_RAETH_ESW_PORT_LAN1=1</span><br><span class="line">CONFIG_RAETH_ESW_PORT_LAN2=0</span><br><span class="line">CONFIG_RAETH_ESW_PORT_LAN3=3</span><br><span class="line">CONFIG_RAETH_ESW_PORT_LAN4=2</span><br><span class="line"></span><br><span class="line">//ä¸Šé¢æ˜¯newifi miniçš„ï¼Œç”±äºæ¯ä¸ªæœºå‹ä¸åŒï¼Œä»…ä¾›å‚è€ƒ</span><br></pre></td></tr></table></figure><h3 id="å¼€å¯å¤–ç½®PA-LANæ”¯æŒ"><a href="#å¼€å¯å¤–ç½®PA-LANæ”¯æŒ" class="headerlink" title="å¼€å¯å¤–ç½®PA&amp;LANæ”¯æŒ"></a>å¼€å¯å¤–ç½®PA&amp;LANæ”¯æŒ</h3><p>åœ¨ <code>/opt/rt-56u/trunk/configs/boards/RT-AC54U/kernel-3.4.x.config</code>é‡Œåˆ é™¤<code># CONFIG_EXTERNAL_PA_EXTERNAL_LNA is not set</code> è¿™ä¸€è¡Œä»£ç ï¼Œå¹¶åŠ å…¥ä¸‹é¢çš„ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONFIG_EXTERNAL_PA_EXTERNAL_LNA=y</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•å†…å­˜"><a href="#æ‰©å±•å†…å­˜" class="headerlink" title="æ‰©å±•å†…å­˜"></a>æ‰©å±•å†…å­˜</h3><p>ç¼–è¾‘<code>/opt/rt-56u/trunk/configs/boards/RT-AC54U/kernel-3.4.x.config</code>é…ç½®æ–‡ä»¶ï¼Œä»¥AC-54Uä¸ºä¾‹ï¼Œé»˜è®¤æ˜¯64Mï¼Œæ‰€ä»¥åªéœ€è¦å°†ä»¥ä¸‹ä»£ç è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// æ²¡ä¿®æ”¹å‰æ˜¯64Må†…å­˜</span><br><span class="line">CONFIG_RT2880_DRAM_16M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_32M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_64M=y</span><br><span class="line">CONFIG_RT2880_DRAM_128M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_256M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RALINK_RAM_SIZE=64</span><br><span class="line"></span><br><span class="line">// ä¿®æ”¹æˆ128M</span><br><span class="line">CONFIG_RT2880_DRAM_16M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_32M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_64M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RT2880_DRAM_128M=y</span><br><span class="line">CONFIG_RT2880_DRAM_256M is not <span class="built_in">set</span></span><br><span class="line">CONFIG_RALINK_RAM_SIZE=128</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æ—¶åŒº"><a href="#è®¾ç½®æ—¶åŒº" class="headerlink" title="è®¾ç½®æ—¶åŒº"></a>è®¾ç½®æ—¶åŒº</h3><p>ç¼–è¾‘<code>/opt/rt-56u/trunk/user/shared/defaults.h</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#define DEF_TIMEZONE&quot;CST-8&quot;</span></span><br><span class="line"><span class="comment">#define DEF_NTP_SERVER0&quot;ntp1.aliyun.com&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å…³é—­-telnet-å¼€å¯-ssh"><a href="#å…³é—­-telnet-å¼€å¯-ssh" class="headerlink" title="å…³é—­ telnet å¼€å¯ ssh"></a>å…³é—­ telnet å¼€å¯ ssh</h3><p>ç¼–è¾‘<code>/opt/rt-56u/trunk/user/shared/defaults.c</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;telnetd&quot;</span>,<span class="string">&quot;0&quot;</span>&#125;.</span><br><span class="line">&#123;<span class="string">&quot;sshd_enable&quot;</span>,<span class="string">&quot;1&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="æ±‰åŒ–"><a href="#æ±‰åŒ–" class="headerlink" title="æ±‰åŒ–"></a>æ±‰åŒ–</h2><p>ç¼–è¾‘<code>trunk/user/www/dict/EN.header</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>LANG_EN=English</code>ä¿®æ”¹æˆä»¥ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG_EN=ç®€ä½“ä¸­æ–‡</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>trunk/user/www/dict/EN.footer</code>æ–‡ä»¶ï¼ŒæŠŠé‡Œé¢å†…å®¹ç¿»è¯‘æˆä¸­æ–‡ï¼ˆä¹Ÿå¯ä»¥ä»å·²ç»æ±‰åŒ–çš„å›ºä»¶é‡Œæå–<code>/www/EN.dict</code>æ–‡ä»¶ï¼Œåˆ é™¤ä»¥ä¸‹çš„å†…å®¹ï¼Œç„¶åä¿å­˜å¹¶é‡æ–°å‘½åæˆ<code>EN.footer</code>ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Language <span class="built_in">type</span>]</span><br><span class="line">LANG_EN=ç®€ä½“ä¸­æ–‡</span><br><span class="line">LANG_RU=English</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>trunk/user/www/Makefile</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>echo &quot;LANG_RU=PÑƒÑÑĞºĞ¸Ğ¹&quot; &gt;&gt; $(ROMFS_DIR)/www/EN.header</code>ä¿®æ”¹æˆä»¥ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;LANG_RU=English&quot;</span> &gt;&gt; $(ROMFS_DIR)/www/EN.header</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>trunk/user/www/dict/RU.dict</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>LANG_EN=English</code>ä¿®æ”¹æˆä»¥ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG_EN=ç®€ä½“ä¸­æ–‡</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆå›ºä»¶"><a href="#ç”Ÿæˆå›ºä»¶" class="headerlink" title="ç”Ÿæˆå›ºä»¶"></a>ç”Ÿæˆå›ºä»¶</h2><h3 id="æ¸…é™¤æºç æ ‘"><a href="#æ¸…é™¤æºç æ ‘" class="headerlink" title="æ¸…é™¤æºç æ ‘"></a>æ¸…é™¤æºç æ ‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./clear_tree</span><br></pre></td></tr></table></figure><h3 id="å¼€å§‹ç¼–è¯‘ç”Ÿæˆå›ºä»¶"><a href="#å¼€å§‹ç¼–è¯‘ç”Ÿæˆå›ºä»¶" class="headerlink" title="å¼€å§‹ç¼–è¯‘ç”Ÿæˆå›ºä»¶"></a>å¼€å§‹ç¼–è¯‘ç”Ÿæˆå›ºä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./build_firmware</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®Œæˆåç”Ÿæˆçš„å›ºä»¶åœ¨<code>/opt/rt-56u/trunk/images</code>é‡Œé¢</p><h2 id="æ›´æ–°æºç "><a href="#æ›´æ–°æºç " class="headerlink" title="æ›´æ–°æºç "></a>æ›´æ–°æºç </h2><p>è½¬åˆ°<code>/opt</code>ç›®å½•ï¼Œå…‹éš†æœ€æ–°æºç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line">sudo git pull</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¯¹æœ¬åœ°å­˜ä»“åº“è¿›è¡Œäº†æ›´æ”¹ï¼Œé‚£ä¹ˆåœ¨æ›´æ–°æºç çš„æ—¶å€™ï¼Œä½ å¿…é¡»è¿è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo git stash</span><br><span class="line">sudo git pull</span><br></pre></td></tr></table></figure><p>å¦‚æœæ›´æ”¹äº†å·¥å…·é“¾ï¼Œåˆ™å¿…é¡»é‡æ–°æ„å»ºå®ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/rt-n56u/toolchain-mipsel</span><br><span class="line">sudo ./clean_sources  </span><br><span class="line">sudo ./clean_toolchain  </span><br><span class="line">sudo ./build_toolchain</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„ä¿®æ”¹å»ºè®®ä½¿ç”¨æ‰‹å·¥è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨æ–‡ä»¶è¿›è¡Œè¦†ç›–çš„è¯å¾ˆå®¹æ˜“å‡ºé”™ã€‚è€Œä¸”ä¸€ä½†ç¼–è¯‘å‡ºé”™çš„è¯éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´è¿›è¡Œè°ƒæ•´ï¼Œæ‰€ä»¥è¿˜æ˜¯è‡ªå·±ä¸€æ­¥æ­¥æ…¢æ…¢æ”¹å§ã€‚</p><p>æ›´å¤šè¯·å‚è€ƒ<a class="link"   href="https://bitbucket.org/padavan/rt-n56u/wiki/EN/HowToMakeFirmware" >Padavanå®˜ç½‘ç¼–è¯‘æ•™ç¨‹<i class="fas fa-external-link-alt"></i></a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;é…ç½®ç¼–è¯‘ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#é…ç½®ç¼–è¯‘ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®ç¼–è¯‘ç¯å¢ƒ&quot;&gt;&lt;/a&gt;é…ç½®ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;&lt;h3 id=&quot;å®‰è£…è™šæ‹Ÿæœº&quot;&gt;&lt;a href=&quot;#å®‰è£…è™šæ‹Ÿæœº&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…è™šæ‹Ÿæœº&quot;&gt;&lt;/a&gt;å®‰è£…è™šæ‹Ÿæœº&lt;/h3&gt;&lt;h3 id=&quot;å®‰è£…Ubuntu-16-04LTS&quot;&gt;&lt;a href=&quot;#å®‰è£…Ubuntu-16-04LTS&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…Ubuntu 16.04LTS&quot;&gt;&lt;/a&gt;å®‰è£…Ubuntu 16.04LTS&lt;/h3&gt;&lt;h3 id=&quot;å®‰è£…-git&quot;&gt;&lt;a href=&quot;#å®‰è£…-git&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£… git&quot;&gt;&lt;/a&gt;å®‰è£… git&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get update &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;è½¬åˆ°-optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš†-Padavan-ä»“åº“&quot;&gt;&lt;a href=&quot;#è½¬åˆ°-optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš†-Padavan-ä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;è½¬åˆ°/optç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš† Padavan ä»“åº“&quot;&gt;&lt;/a&gt;è½¬åˆ°&lt;code&gt;/opt&lt;/code&gt;ç›®å½•ï¼Œå¹¶ä¸”ç”¨å‘½ä»¤å…‹éš† Padavan ä»“åº“&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /opt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://bitbucket.org/padavan/rt-n56u.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·&quot;&gt;&lt;a href=&quot;#å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·&quot;&gt;&lt;/a&gt;å®‰è£…ç¼–è¯‘å›ºä»¶æ‰€éœ€è¦çš„å·¥å…·&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install autoconf automake bison build-essential flex gawk gettext gperf libtool pkg-config zlib1g-dev libgmp3-dev libmpc-dev libmpfr-dev texinfo python-docutils mc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾&quot;&gt;&lt;a href=&quot;#ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾&quot;&gt;&lt;/a&gt;ç¼–è¯‘ä¸€ä¸ªäº¤å‰ç¼–è¯‘çš„å·¥å…·é“¾&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /opt/rt-n56u/toolchain-mipsel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo ./clean_sources&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo ./build_toolchain&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;ç¼–è¯‘3-0å†…æ ¸çš„å›ºä»¶&quot;&gt;&lt;a href=&quot;#ç¼–è¯‘3-0å†…æ ¸çš„å›ºä»¶&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶&quot;&gt;&lt;/a&gt;ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦ç¼–è¯‘3.0å†…æ ¸çš„å›ºä»¶å°±éœ€è¦æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œé»˜è®¤æ”¯æŒ3.4å†…æ ¸&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /opt/rt-n56u/toolchain-mipsel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo ./clean_sources&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo ./build_toolchain_3.0.x&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;ç¼–è¯‘å¥½åçš„å·¥å…·é“¾ä¼šæ”¾åœ¨&lt;code&gt;/opt/rt-n56u/toolchain-mipsel/toolchain-3.0.x&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ååœ¨æ›´æ–°æˆ–è€…å‡çº§å·¥å…·é“¾çš„æƒ…å†µä¸‹æ‰éœ€è¦æ‰§è¡Œä»¥ä¸Šæ­¥éª¤ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="router" scheme="http://zhen-ke.github.io/categories/router/"/>
    
    
    <category term="padavan" scheme="http://zhen-ke.github.io/tags/padavan/"/>
    
  </entry>
  
</feed>
